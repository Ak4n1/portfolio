import{a as E}from"./chunk-BHQHOUID.js";import"./chunk-MQB6D6E4.js";import{d as C,f as O,g as M}from"./chunk-N2ECJDZB.js";import"./chunk-27IFVBVS.js";import"./chunk-SFS47BZX.js";import{s as _}from"./chunk-XPIPXS6X.js";import{Ab as v,Eb as x,Ib as u,Jb as m,Rb as n,Sb as b,Ua as a,_ as c,cb as f,fa as g,ga as p,hb as h,pb as y,tb as l,yb as e,zb as t}from"./chunk-PWGBBCAH.js";function k(r,o){r&1&&(e(0,"p",2),n(1,"VERIFICACION EN CURSO"),t(),e(2,"h2",3),n(3,"Verificando tu email..."),t(),e(4,"p",4),n(5,"Por favor, espera."),t())}function S(r,o){r&1&&(e(0,"p",2),n(1,"ACCESO HABILITADO"),t(),e(2,"h2",3),n(3,"Email verificado"),t(),e(4,"p",5),n(5,"Tu cuenta esta activa. Ya puedes iniciar sesion."),t(),e(6,"div",6)(7,"div",7),v(8,"i",8),n(9," Acceso seguro habilitado"),t()(),e(10,"div",9)(11,"a",10),n(12,"Iniciar sesion"),t()())}function V(r,o){if(r&1){let i=x();e(0,"p",2),n(1,"NO SE PUDO VALIDAR"),t(),e(2,"h2",3),n(3,"Error al verificar"),t(),e(4,"p",11),n(5),t(),e(6,"div",12)(7,"button",13),u("click",function(){g(i);let d=m();return p(d.retry())}),n(8," Reintentar "),t(),e(9,"button",14),u("click",function(){g(i);let d=m();return p(d.goToResendVerification())}),n(10," Reenviar email "),t(),e(11,"a",10),n(12,"Ir a login"),t()()}if(r&2){let i=m();a(5),b(i.errorMessage),a(2),y("disabled",i.isRetrying)}}var P=class r{route=c(C);router=c(O);authService=c(E);state="verifying";errorMessage="";isRetrying=!1;token="";ngOnInit(){this.route.queryParams.subscribe(o=>{this.token=o.token||"",this.token?this.verifyEmail():(this.state="error",this.errorMessage="Token no proporcionado. Usa el enlace del email.")})}verifyEmail(){!this.token||this.isRetrying||(this.state="verifying",this.errorMessage="",this.isRetrying=!1,this.authService.verifyEmail(this.token).subscribe({next:()=>{this.state="success"},error:o=>{this.state="error",this.isRetrying=!1,this.errorMessage=o.error?.message||"Token inv\xE1lido o expirado."}}))}retry(){this.isRetrying=!0,this.verifyEmail()}goToResendVerification(){this.router.navigate(["/verify-email-pending"])}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=f({type:r,selectors:[["app-verify-email"]],decls:5,vars:3,consts:[[1,"auth-page"],[1,"auth-container"],[1,"auth-kicker"],[1,"auth-title"],[1,"auth-message"],[1,"auth-success"],[1,"auth-info-grid"],[1,"auth-info-item"],[1,"fas","fa-shield-alt"],[1,"auth-primary-action"],["routerLink","/login",1,"btn-submit"],[1,"auth-error"],[1,"auth-actions"],["type","button",1,"btn-secondary",3,"click","disabled"],["type","button",1,"btn-secondary",3,"click"]],template:function(i,s){i&1&&(e(0,"section",0)(1,"div",1),h(2,k,6,0)(3,S,13,0)(4,V,13,2),t()()),i&2&&(a(2),l(s.state==="verifying"?2:-1),a(),l(s.state==="success"?3:-1),a(),l(s.state==="error"?4:-1))},dependencies:[_,M],styles:[".auth-page[_ngcontent-%COMP%]{min-height:80vh;display:flex;align-items:center;justify-content:center;padding:2rem}.auth-container[_ngcontent-%COMP%]{width:100%;max-width:520px;background:color-mix(in srgb,var(--color-primary) 6%,var(--background-dark));border:1px solid color-mix(in srgb,var(--color-primary) 18%,transparent);border-radius:14px;padding:2rem;box-shadow:0 5px 10px #00ffc31a}.auth-kicker[_ngcontent-%COMP%]{margin:0 0 .6rem;text-align:center;font-size:.72rem;letter-spacing:.12em;font-weight:800;color:var(--primary-color)}.auth-title[_ngcontent-%COMP%]{color:var(--title-primary);font-size:2rem;margin-bottom:.75rem;text-align:center}.auth-message[_ngcontent-%COMP%], .auth-success[_ngcontent-%COMP%], .auth-error[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:center}.auth-success[_ngcontent-%COMP%]{color:var(--primary-color)}.auth-error[_ngcontent-%COMP%]{color:var(--error, #e74c3c)}.auth-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:.45rem;margin:1.2rem 0 1.1rem}.auth-info-item[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);padding:.55rem .7rem;border-radius:8px;border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);background:color-mix(in srgb,var(--color-primary) 5%,transparent)}.auth-info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);margin-right:.45rem}.auth-primary-action[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:.35rem}.auth-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem;margin-top:1.25rem}.btn-secondary[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{min-width:160px;padding:.7rem 1.1rem;border-radius:8px;font-size:.95rem;font-weight:700;cursor:pointer;text-align:center;text-decoration:none;display:inline-block}.btn-secondary[_ngcontent-%COMP%]{flex:1;background:transparent;color:var(--text-secondary);border:1px solid var(--border-color)}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-submit[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--background-dark);border:none}.btn-submit[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}@media (max-width: 640px){.auth-page[_ngcontent-%COMP%]{padding:1rem}.auth-container[_ngcontent-%COMP%]{padding:1.25rem}.auth-title[_ngcontent-%COMP%]{font-size:1.6rem}.auth-actions[_ngcontent-%COMP%]{flex-direction:column}.btn-secondary[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{width:100%}}"]})};export{P as VerifyEmailComponent};
