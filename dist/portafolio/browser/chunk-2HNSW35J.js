import{a as k}from"./chunk-RN22FLO7.js";import{d as x,f as C,g as E}from"./chunk-3STYZOIF.js";import"./chunk-DW4U6NCB.js";import"./chunk-WY3MPDUA.js";import{s as _}from"./chunk-RKUWSNO2.js";import{Eb as y,Ib as g,Jb as m,Rb as i,Sb as b,Ua as a,_ as c,cb as f,fa as u,ga as p,hb as h,pb as v,tb as l,yb as e,zb as t}from"./chunk-VJKI3SXJ.js";function O(r,o){r&1&&(e(0,"h2",2),i(1,"Verificando tu email..."),t(),e(2,"p",3),i(3,"Por favor, espera."),t())}function P(r,o){r&1&&(e(0,"h2",2),i(1,"\xA1Email verificado!"),t(),e(2,"p",4),i(3,"Tu cuenta est\xE1 activa. Ya puedes iniciar sesi\xF3n."),t(),e(4,"a",5),i(5,"Iniciar Sesi\xF3n"),t())}function V(r,o){if(r&1){let n=y();e(0,"h2",2),i(1,"Error al verificar"),t(),e(2,"p",6),i(3),t(),e(4,"div",7)(5,"button",8),g("click",function(){u(n);let d=m();return p(d.retry())}),i(6," Reintentar "),t(),e(7,"button",9),g("click",function(){u(n);let d=m();return p(d.goToResendVerification())}),i(8," Reenviar Email "),t(),e(9,"a",5),i(10,"Ir a Login"),t()()}if(r&2){let n=m();a(3),b(n.errorMessage),a(2),v("disabled",n.isRetrying)}}var M=class r{route=c(x);router=c(C);authService=c(k);state="verifying";errorMessage="";isRetrying=!1;token="";ngOnInit(){this.route.queryParams.subscribe(o=>{this.token=o.token||"",this.token?this.verifyEmail():(this.state="error",this.errorMessage="Token no proporcionado. Usa el enlace del email.")})}verifyEmail(){!this.token||this.isRetrying||(this.state="verifying",this.errorMessage="",this.isRetrying=!1,this.authService.verifyEmail(this.token).subscribe({next:()=>{this.state="success"},error:o=>{this.state="error",this.isRetrying=!1,this.errorMessage=o.error?.message||"Token inv\xE1lido o expirado."}}))}retry(){this.isRetrying=!0,this.verifyEmail()}goToResendVerification(){this.router.navigate(["/verify-email-pending"])}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=f({type:r,selectors:[["app-verify-email"]],decls:5,vars:3,consts:[[1,"auth-page"],[1,"auth-container"],[1,"auth-title"],[1,"auth-message"],[1,"auth-success"],["routerLink","/login",1,"btn-submit"],[1,"auth-error"],[1,"auth-actions"],["type","button",1,"btn-secondary",3,"click","disabled"],["type","button",1,"btn-secondary",3,"click"]],template:function(n,s){n&1&&(e(0,"section",0)(1,"div",1),h(2,O,4,0)(3,P,6,0)(4,V,11,2),t()()),n&2&&(a(2),l(s.state==="verifying"?2:-1),a(),l(s.state==="success"?3:-1),a(),l(s.state==="error"?4:-1))},dependencies:[_,E],styles:[".auth-page[_ngcontent-%COMP%]{min-height:80vh;display:flex;align-items:center;justify-content:center;padding:2rem}.auth-container[_ngcontent-%COMP%]{width:100%;max-width:420px;background:var(--background-card);border:1px solid var(--border-color);border-radius:12px;padding:2rem}.auth-title[_ngcontent-%COMP%]{color:var(--title-primary);font-size:1.5rem;margin-bottom:1rem;text-align:center}.auth-message[_ngcontent-%COMP%], .auth-success[_ngcontent-%COMP%], .auth-error[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:center}.auth-success[_ngcontent-%COMP%]{color:var(--primary-color)}.auth-error[_ngcontent-%COMP%]{color:var(--error, #e74c3c)}.auth-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem;margin-top:1.25rem}.btn-secondary[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{flex:1;min-width:120px;padding:.6rem 1rem;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;text-align:center;text-decoration:none;display:inline-block}.btn-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--text-secondary);border:1px solid var(--border-color)}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-submit[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--background-dark);border:none}.btn-submit[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}"]})};export{M as VerifyEmailComponent};
