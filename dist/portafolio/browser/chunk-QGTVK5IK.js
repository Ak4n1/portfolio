import{a as D}from"./chunk-3D4DKAA7.js";import{g as S}from"./chunk-3STYZOIF.js";import"./chunk-DW4U6NCB.js";import"./chunk-WY3MPDUA.js";import{s as E}from"./chunk-RKUWSNO2.js";import{$b as C,Ab as _,Eb as v,Ib as h,Jb as s,Qa as j,Rb as a,Sb as p,Tb as O,Ua as i,_ as P,cb as k,fa as b,ga as f,hb as l,pb as g,sb as w,tb as d,vb as M,wb as x,xb as u,yb as n,zb as o}from"./chunk-VJKI3SXJ.js";var F=t=>["/project",t],z=t=>["/dashboard/projects",t],$=(t,r)=>r.id;function L(t,r){t&1&&(n(0,"div",6),_(1,"div",10),n(2,"p"),a(3,"Cargando proyectos..."),o()())}function V(t,r){if(t&1){let e=v();n(0,"div",7)(1,"p"),a(2),o(),n(3,"button",11),h("click",function(){b(e);let m=s();return f(m.loadProjects())}),a(4,"Reintentar"),o()()}if(t&2){let e=s();i(2),p(e.error)}}function U(t,r){t&1&&(n(0,"div",8)(1,"p"),a(2,"A\xFAn no hay proyectos. Crea el primero."),o(),n(3,"a",12),a(4,"+ Nuevo proyecto"),o()())}function N(t,r){if(t&1&&_(0,"img",15),t&2){let e=s().$implicit,c=s(2);g("src",c.getImageUrl(c.getProjectImageUrls(e)[0]),j)("alt",e.title)}}function A(t,r){if(t&1&&(n(0,"div",16),_(1,"i",28),o()),t&2){let e=s().$implicit,c=s(2);i(),w(c.getCategoryIcon(e.category))}}function R(t,r){if(t&1&&(n(0,"p",24),a(1),o()),t&2){let e=s().$implicit;i(),p(e.shortDescription==null?null:e.shortDescription.trim())}}function B(t,r){if(t&1&&(n(0,"span",29),a(1),o()),t&2){let e=r.$implicit;i(),p(e)}}function q(t,r){if(t&1&&(n(0,"span",30),a(1),o()),t&2){let e=s(2).$implicit;i(),O("+",e.stacks.length-4,"")}}function G(t,r){if(t&1&&(n(0,"div",26),x(1,B,2,1,"span",29,M),l(3,q,2,1,"span",30),o()),t&2){let e=s().$implicit;i(),u(e.stacks.slice(0,4)),i(2),d(e.stacks.length>4?3:-1)}}function H(t,r){t&1&&(n(0,"span",27),a(1,"Oculto"),o())}function J(t,r){if(t&1){let e=v();n(0,"div",13)(1,"div",14),l(2,N,1,2,"img",15)(3,A,2,2,"div",16),n(4,"div",17)(5,"div",18)(6,"a",19),a(7,"Ver"),o(),n(8,"a",20),a(9,"Editar"),o()(),n(10,"button",21),h("click",function(m){let y=b(e).$implicit,T=s(2);return f(T.deleteProject(y.id,y.title,m))}),a(11,"Eliminar"),o()()(),n(12,"div",22)(13,"h3",23),a(14),o(),l(15,R,2,1,"p",24),n(16,"span",25),a(17),o(),l(18,G,4,1,"div",26)(19,H,2,0,"span",27),o()()}if(t&2){let e=r.$implicit,c=s(2);i(2),d(c.getProjectImageUrls(e).length>0?2:3),i(4),g("routerLink",C(8,F,e.id)),i(2),g("routerLink",C(10,z,e.id)),i(6),p(e.title),i(),d(e.shortDescription!=null&&e.shortDescription.trim()?15:-1),i(2),p(e.category),i(),d(e.stacks&&e.stacks.length>0?18:-1),i(),d(e.visible?-1:19)}}function K(t,r){if(t&1&&(n(0,"div",9),x(1,J,20,12,"div",13,$),o()),t&2){let e=s();i(),u(e.projects)}}var I=class t{projectService=P(D);projects=[];loading=!0;error="";ngOnInit(){this.loadProjects()}loadProjects(){this.loading=!0,this.error="",this.projectService.list(!1).subscribe({next:r=>{this.projects=r,this.loading=!1},error:r=>{this.error=r?.error?.message||"Error al cargar proyectos",this.loading=!1}})}getImageUrl(r){return this.projectService.getImageUrl(r)}getProjectImageUrls(r){return r.images?.length?r.images:r.imageItems?.length?r.imageItems.map(e=>e.url):[]}getCategoryIcon(r){let e=(r||"").toLowerCase();return e.includes("frontend")?"fas fa-code":e.includes("backend")?"fas fa-server":e.includes("desktop")?"fas fa-desktop":e.includes("fullstack")?"fas fa-layer-group":e.includes("mobile")?"fas fa-mobile-alt":e.includes("devops")?"fas fa-cogs":"fas fa-folder"}deleteProject(r,e,c){c.preventDefault(),c.stopPropagation(),confirm(`\xBFEliminar el proyecto "${e}"?`)&&this.projectService.delete(r).subscribe({next:()=>this.loadProjects(),error:m=>alert(m?.error?.message||"Error al eliminar")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-dashboard-projects"]],decls:14,vars:1,consts:[[1,"dashboard-page"],[1,"dashboard-page-header"],[1,"dashboard-page-title"],[1,"dashboard-page-subtitle"],["routerLink","/dashboard/projects/new",1,"btn-create"],[1,"dashboard-page-content"],[1,"loading-state"],[1,"error-state"],[1,"empty-state"],[1,"projects-grid"],[1,"loading-spinner"],["type","button",1,"btn-retry",3,"click"],["routerLink","/dashboard/projects/new",1,"btn-create-inline"],[1,"project-card"],[1,"project-card-image"],[3,"src","alt"],[1,"project-card-placeholder"],[1,"project-card-actions"],[1,"project-card-actions-row"],["title","Ver",1,"btn-view",3,"routerLink"],["title","Editar",1,"btn-edit",3,"routerLink"],["type","button","title","Eliminar",1,"btn-delete",3,"click"],[1,"project-card-body"],[1,"project-card-title"],[1,"project-card-short-desc"],[1,"project-card-category"],[1,"project-card-stacks"],[1,"badge-hidden"],["aria-hidden","true",1,"project-icon-fa"],[1,"stack-tag"],[1,"stack-tag","stack-more"]],template:function(e,c){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),a(4,"Proyectos"),o(),n(5,"p",3),a(6,"Administra los proyectos de tu portafolio"),o()(),n(7,"a",4),a(8,"+ Nuevo proyecto"),o()(),n(9,"div",5),l(10,L,4,0,"div",6)(11,V,5,1,"div",7)(12,U,5,0,"div",8)(13,K,3,0,"div",9),o()()),e&2&&(i(10),d(c.loading?10:c.error?11:c.projects.length===0?12:13))},dependencies:[E,S],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;min-height:0}.dashboard-page[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:var(--spacing-xl);color:var(--color-text-primary);background-color:var(--background-dark);min-height:100%}.dashboard-page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;gap:var(--spacing-lg);margin-bottom:var(--spacing-xl);flex-wrap:wrap}.dashboard-page-title[_ngcontent-%COMP%]{font-size:clamp(1.5rem,4vw,2rem);font-weight:800;letter-spacing:-.02em;margin:0 0 .25rem;color:var(--color-text-primary)}.dashboard-page-subtitle[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary);font-size:.9375rem}.btn-create[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.75rem 1.5rem;background:var(--color-primary);color:var(--color-primary-contrast, #0a0f0e);border-radius:var(--border-radius-md);font-weight:800;font-size:.875rem;text-transform:uppercase;letter-spacing:.03em;text-decoration:none;transition:background .2s,box-shadow .2s}.btn-create[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 90%,white);box-shadow:0 0 20px color-mix(in srgb,var(--color-primary) 40%,transparent)}.dashboard-page-content[_ngcontent-%COMP%]{flex:1;min-height:200px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--spacing-md);padding:var(--spacing-2xl);color:var(--color-text-secondary);text-align:center}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--border-color);border-top-color:var(--text-accent);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.btn-retry[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:transparent;color:var(--color-primary);border:2px solid var(--color-primary);border-radius:var(--border-radius-md);cursor:pointer;font-weight:800;font-size:.875rem;text-transform:uppercase;letter-spacing:.03em;transition:background .2s}.btn-retry[_ngcontent-%COMP%]:hover{background:var(--color-primary-light)}.btn-create-inline[_ngcontent-%COMP%]{display:inline-flex;padding:.75rem 1.5rem;background:var(--color-primary);color:var(--color-primary-contrast, #0a0f0e);border-radius:var(--border-radius-md);font-weight:800;font-size:.875rem;text-transform:uppercase;letter-spacing:.03em;text-decoration:none;transition:background .2s,box-shadow .2s}.btn-create-inline[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 90%,white);box-shadow:0 0 20px color-mix(in srgb,var(--color-primary) 40%,transparent)}.projects-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:var(--spacing-lg)}.project-card[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-primary) 6%,var(--background-dark));border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);border-radius:.75rem;overflow:hidden;transition:border-color .2s,box-shadow .2s}.project-card[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);box-shadow:0 0 15px color-mix(in srgb,var(--color-primary) 25%,transparent)}.project-card-image[_ngcontent-%COMP%]{position:relative;aspect-ratio:16 / 10;overflow:hidden;background:var(--background-section)}.project-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.project-card-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:var(--background-section)}.project-icon-fa[_ngcontent-%COMP%]{font-size:2.5rem;opacity:.7;color:var(--text-accent)}.project-card-stacks[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem;margin-top:.5rem}.stack-tag[_ngcontent-%COMP%]{font-size:.6875rem;padding:.125rem .375rem;background:var(--background-section);border-radius:var(--border-radius-sm);color:var(--text-secondary)}.stack-more[_ngcontent-%COMP%]{opacity:.8}.project-card-actions[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--spacing-md);background:#0009;opacity:0;transition:opacity .2s}.project-card[_ngcontent-%COMP%]:hover   .project-card-actions[_ngcontent-%COMP%]{opacity:1}.project-card-actions-row[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:center}.btn-view[_ngcontent-%COMP%], .btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:var(--border-radius-md);font-size:.875rem;font-weight:700;text-transform:uppercase;letter-spacing:.03em;cursor:pointer;text-decoration:none;border:none;transition:background .2s,box-shadow .2s}.btn-view[_ngcontent-%COMP%], .btn-edit[_ngcontent-%COMP%]{background:var(--color-primary);color:var(--color-primary-contrast, #0a0f0e)}.btn-view[_ngcontent-%COMP%]:hover, .btn-edit[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 90%,white);box-shadow:0 0 12px color-mix(in srgb,var(--color-primary) 40%,transparent)}.btn-delete[_ngcontent-%COMP%]{background:#ef4444e6;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef4444;box-shadow:0 0 12px #ef444466}.project-card-body[_ngcontent-%COMP%]{padding:var(--spacing-md)}.project-card-title[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;font-weight:700;color:var(--color-text-primary)}.project-card-short-desc[_ngcontent-%COMP%]{margin:.25rem 0 .5rem;font-size:.8125rem;color:var(--text-secondary);line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.project-card-category[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary)}.badge-hidden[_ngcontent-%COMP%]{display:inline-block;margin-left:.5rem;padding:.125rem .5rem;font-size:.6875rem;background:var(--warning);color:#0a0f0e;border-radius:var(--border-radius-sm);font-weight:600}"]})};export{I as DashboardProjectsComponent};
