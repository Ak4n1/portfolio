import{a as E}from"./chunk-QAUAQUX7.js";import{c as F,d as _,e as k,f as I,k as V,m as T,n as z,v as N,x as R}from"./chunk-IGSUT72Y.js";import"./chunk-MQB6D6E4.js";import{f as O,g as S}from"./chunk-IBUNDTLB.js";import"./chunk-46EHWJZL.js";import"./chunk-AB3PYKT6.js";import{k as w,s as M}from"./chunk-L3SKP5V6.js";import{Ab as y,Eb as b,Ib as v,Jb as s,Rb as i,Sb as x,Tb as P,Ua as a,_ as l,cb as h,fa as g,ga as f,hb as c,pb as m,rb as C,tb as d,yb as n,zb as o}from"./chunk-GWDYAHF2.js";function j(e,r){if(e&1&&(n(0,"div",3)(1,"p",4),i(2,"Se ha enviado un email a "),n(3,"strong"),i(4),o()(),n(5,"p",5),i(6,"Revisa tu bandeja de entrada y spam. El enlace expira en 15 minutos."),o(),n(7,"div",6)(8,"a",7),i(9,"Volver a Iniciar Sesi\xF3n"),o()()()),e&2){let t=s();a(4),x(t.submittedEmail)}}function D(e,r){if(e&1){let t=b();n(0,"button",20),v("click",function(){g(t);let p=s(3);return f(p.goToResendVerification())}),i(1," Reenviar Email de Verificaci\xF3n "),o()}}function q(e,r){if(e&1&&(n(0,"p",18),i(1),o(),c(2,D,2,0,"button",19)),e&2){let t=s(2);a(),x(t.errorMessage),a(),d(t.errorMessage.includes("verificado")?2:-1)}}function L(e,r){e&1&&(n(0,"span",21),i(1,"Email v\xE1lido requerido"),o())}function Y(e,r){if(e&1){let t=b();n(0,"p",8),i(1,"Ingresa tu email y te enviaremos las instrucciones para restablecer tu contrase\xF1a."),o(),c(2,q,3,2),n(3,"form",9),v("ngSubmit",function(){g(t);let p=s();return f(p.onSubmit())}),n(4,"div",10)(5,"label",11),i(6,"Email"),o(),n(7,"div",12),y(8,"i",13)(9,"input",14),o(),c(10,L,2,0,"span",15),o(),n(11,"div",16)(12,"button",17),i(13),o()()()}if(e&2){let t=s();a(2),d(t.errorMessage?2:-1),a(),m("formGroup",t.form),a(6),C("error",t.isFieldInvalid("email")),a(),m("ngIf",t.isFieldInvalid("email")),a(2),m("disabled",t.form.invalid||t.isSubmitting),a(),P(" ",t.isSubmitting?"Enviando...":"Enviar Instrucciones"," ")}}var G=class e{fb=l(N);router=l(O);authService=l(E);form;isSubmitting=!1;success=!1;errorMessage="";submittedEmail="";constructor(){this.form=this.fb.group({email:["",[_.required,_.email]]})}isFieldInvalid(r){let t=this.form.get(r);return!!t&&t.invalid&&(t.dirty||t.touched)}onSubmit(){if(this.form.invalid||this.isSubmitting)return;this.isSubmitting=!0,this.success=!1,this.errorMessage="";let r=this.form.get("email")?.value;this.authService.forgotPassword(r).subscribe({next:()=>{this.isSubmitting=!1,this.success=!0,this.submittedEmail=r},error:t=>{this.isSubmitting=!1,this.errorMessage=t.error?.message||"Error al solicitar. Intenta m\xE1s tarde."}})}goToLogin(){this.router.navigate(["/login"])}goToResendVerification(){let r=this.form.get("email")?.value;this.router.navigate(["/verify-email-pending"],{queryParams:{email:r}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["app-forgot-password"]],decls:6,vars:1,consts:[[1,"auth-page"],[1,"auth-container"],[1,"auth-title"],[1,"auth-message-container"],[1,"auth-success"],[1,"auth-hint"],[1,"auth-actions","centered"],["routerLink","/login",1,"btn-submit"],[1,"auth-message"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],[1,"input-with-icon"],[1,"fas","fa-envelope","input-icon"],["id","email","type","email","formControlName","email","placeholder","tu@email.com"],["class","error-msg",4,"ngIf"],[1,"auth-actions"],["type","submit",1,"btn-submit",3,"disabled"],[1,"auth-error"],["type","button",1,"btn-secondary"],["type","button",1,"btn-secondary",3,"click"],[1,"error-msg"]],template:function(t,u){t&1&&(n(0,"section",0)(1,"div",1)(2,"h2",2),i(3,"Recuperar Contrase\xF1a"),o(),c(4,j,10,1,"div",3)(5,Y,14,7),o()()),t&2&&(a(4),d(u.success?4:5))},dependencies:[M,w,R,V,F,k,I,T,z,S],styles:[".auth-page[_ngcontent-%COMP%]{min-height:80vh;display:flex;align-items:center;justify-content:center;padding:2rem}.auth-container[_ngcontent-%COMP%]{width:100%;max-width:420px;background:color-mix(in srgb,var(--color-primary) 6%,var(--background-dark));-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);border-radius:.75rem;padding:2.5rem;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:var(--shadow-card)}.auth-container[_ngcontent-%COMP%]:hover{transform:translateY(-4px);border-color:var(--color-primary);box-shadow:var(--shadow-neon)}.auth-title[_ngcontent-%COMP%]{color:var(--color-primary);font-size:1.75rem;font-weight:700;margin-bottom:1.5rem;text-align:center}.auth-message[_ngcontent-%COMP%], .auth-success[_ngcontent-%COMP%], .auth-hint[_ngcontent-%COMP%]{margin-bottom:1.25rem;color:var(--color-text-primary);line-height:1.6;text-align:center}.auth-message-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.auth-success[_ngcontent-%COMP%]{color:var(--primary-color)}.auth-hint[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.auth-error[_ngcontent-%COMP%]{color:var(--error, #e74c3c);font-size:.9rem;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--color-text-secondary);font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.08em;margin-bottom:.5rem;margin-left:.25rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem .875rem 2.75rem;background:color-mix(in srgb,var(--color-text-primary) 8%,transparent);border:1px solid color-mix(in srgb,var(--color-text-primary) 25%,transparent);border-radius:var(--border-radius-md);color:var(--color-text-primary);font-size:1rem;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px color-mix(in srgb,var(--color-primary) 25%,transparent)}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:var(--error, #e74c3c)}.input-with-icon[_ngcontent-%COMP%]{position:relative;width:100%}.input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:var(--color-text-secondary);font-size:1rem;pointer-events:none;z-index:2;transition:color .2s ease}.error-msg[_ngcontent-%COMP%]{color:var(--error, #e74c3c);font-size:.8rem;margin-top:.25rem;display:block}.auth-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.25rem;width:100%}.auth-actions.centered[_ngcontent-%COMP%]{justify-content:center}.btn-cancel[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{flex:1;padding:.6rem 1rem;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;text-align:center;text-decoration:none;display:inline-flex;align-items:center;justify-content:center}.btn-cancel[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--text-secondary);border:1px solid var(--border-color)}.btn-submit[_ngcontent-%COMP%]{background:var(--color-primary);color:var(--background-dark);border:none;font-weight:800;text-transform:uppercase;letter-spacing:.05em;box-shadow:var(--shadow-neon)}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){filter:brightness(1.1);box-shadow:0 0 20px color-mix(in srgb,var(--color-primary) 40%,transparent);transform:translateY(-2px)}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}"]})};export{G as ForgotPasswordComponent};
