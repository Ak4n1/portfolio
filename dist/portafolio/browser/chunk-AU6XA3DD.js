import{a as ve,b as Se}from"./chunk-5LNJU7KB.js";import{a as Ee}from"./chunk-N7NWD65L.js";import{a as Ce}from"./chunk-FUWIMROM.js";import{a as ce}from"./chunk-3736SKJ3.js";import{a as ge,b as fe,c as xe,d as he,e as be}from"./chunk-5O5RZEKC.js";import{c as de,e as me,j as pe,u as ue,w as _e}from"./chunk-IGSUT72Y.js";import{a as se}from"./chunk-NLD4W7DD.js";import{a as re,b as le}from"./chunk-B7NS5OZX.js";import{a as F}from"./chunk-MQB6D6E4.js";import"./chunk-46EHWJZL.js";import{a as ae,d as V}from"./chunk-AB3PYKT6.js";import{i as ne,s as oe}from"./chunk-L3SKP5V6.js";import{Ab as h,C as q,D as H,E as Q,Eb as C,F as W,Ib as u,Jb as d,Rb as s,Sb as x,Ta as J,Tb as y,U,Ua as l,Ub as ee,Vb as te,_ as w,a as L,b as z,cb as K,fa as m,ga as p,hb as b,ma as Y,o as B,ob as k,oc as ie,p as $,pb as E,rb as S,sb as X,ta as G,tb as g,ua as _,ub as Z,v as j,wb as O,xb as P,yb as a,zb as r}from"./chunk-GWDYAHF2.js";var Pe=F.apiBaseUrl,ke=`${Pe}/api/admin/notifications/send`,I=class i{http=w(V);getHttpOptions(){return{headers:new ae({"Content-Type":"application/json"})}}sendManualNotification(t){return this.http.post(ke,t,this.getHttpOptions())}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Me=[{value:"",label:"Todos los tipos"},{value:"WELCOME",label:"Bienvenida"},{value:"EMAIL_VERIFIED",label:"Email verificado"},{value:"USER_REGISTERED",label:"Usuario registrado"},{value:"ADMIN_ANNOUNCEMENT",label:"Anuncio"},{value:"SYSTEM_MAINTENANCE",label:"Mantenimiento"},{value:"IMPORTANT_UPDATE",label:"Actualizaci\xF3n importante"},{value:"PROMOTION",label:"Promoci\xF3n / Oferta"},{value:"REMINDER",label:"Recordatorio"}];var we=F.apiBaseUrl,Te=`${we}/api/admin/emails/send`,Ne=`${we}/api/admin/emails/check-recipients`,A=class i{http=w(V);checkRecipients(t){return this.http.post(Ne,t)}sendBulkEmail(t,e=[]){let n=new FormData;n.append("request",new Blob([JSON.stringify(t)],{type:"application/json"}));for(let o of e)n.append("files",o,o.name);return this.http.post(Te,n)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var D=(i,t)=>t.value,R=(i,t)=>t.id,De=(i,t)=>t.email;function Re(i,t){i&1&&s(0," Filtra por estado, tipo y fecha ")}function Ue(i,t){i&1&&s(0," Enviar notificaciones manuales ")}function Ve(i,t){i&1&&s(0," Enviar emails a usuarios ")}function Fe(i,t){if(i&1){let e=C();a(0,"li",34),u("click",function(){let o=m(e).$implicit,c=d(2);return c.onTypeFilterChange(o.value),p(c.typeFilterOpen.set(!1))}),s(1),r()}if(i&2){let e=t.$implicit,n=d(2);S("selected",n.typeFilter()===e.value),l(),y(" ",e.label," ")}}function Ie(i,t){if(i&1){let e=C();a(0,"li",34),u("click",function(){let o=m(e).$implicit,c=d(2);return c.onReadFilterChange(o.value),p(c.readFilterOpen.set(!1))}),s(1),r()}if(i&2){let e=t.$implicit,n=d(2);S("selected",n.readFilter()===e.value),l(),y(" ",e.label," ")}}function Ae(i,t){if(i&1){let e=C();a(0,"div",7)(1,"label",13),s(2,"BUSCAR"),r(),a(3,"div",14),h(4,"i",15),a(5,"input",16),u("ngModelChange",function(o){m(e);let c=d();return p(c.searchText.set(o))})("keyup.enter",function(){m(e);let o=d();return p(o.applyFilters())}),r()()(),a(6,"div",7)(7,"label",17),s(8,"TIPO"),r(),a(9,"div",18),u("click",function(o){return m(e),p(o.stopPropagation())}),a(10,"button",19),u("click",function(){m(e);let o=d();return p(o.typeFilterOpen.set(!o.typeFilterOpen()))}),a(11,"span"),s(12),r(),h(13,"i",20),r(),a(14,"ul",21),O(15,Fe,2,3,"li",22,D),r()()(),a(17,"div",7)(18,"label",23),s(19,"RANGO DE FECHA"),r(),a(20,"div",24)(21,"div",25)(22,"span",26),s(23,"Desde"),r(),a(24,"input",27),u("ngModelChange",function(o){m(e);let c=d();return p(c.onDateFromChange(o))}),r()(),a(25,"div",25)(26,"span",26),s(27,"Hasta"),r(),a(28,"input",28),u("ngModelChange",function(o){m(e);let c=d();return p(c.onDateToChange(o))}),r()()()(),a(29,"div",7)(30,"label",23),s(31,"ESTADO"),r(),a(32,"div",18),u("click",function(o){return m(e),p(o.stopPropagation())}),a(33,"button",19),u("click",function(){m(e);let o=d();return p(o.readFilterOpen.set(!o.readFilterOpen()))}),a(34,"span"),s(35),r(),h(36,"i",20),r(),a(37,"ul",21),O(38,Ie,2,3,"li",22,D),r()()(),a(40,"div",29)(41,"button",30),u("click",function(){m(e);let o=d();return p(o.applyFilters())}),h(42,"i",31),s(43," Aplicar "),r(),a(44,"button",32),u("click",function(){m(e);let o=d();return p(o.clearFilters())}),h(45,"i",33),s(46," Limpiar filtros "),r()()}if(i&2){let e=d();l(5),E("ngModel",e.searchText()),l(),S("z-top",e.typeFilterOpen()),l(3),S("open",e.typeFilterOpen()),l(),k("aria-expanded",e.typeFilterOpen()),l(2),x(e.getTypeFilterLabel()),l(3),P(e.typeFilterOptions),l(9),E("ngModel",e.dateFrom()),l(4),E("ngModel",e.dateTo()),l(),S("z-top",e.readFilterOpen()),l(3),S("open",e.readFilterOpen()),l(),k("aria-expanded",e.readFilterOpen()),l(2),x(e.getReadFilterLabel()),l(3),P(e.readFilterOptions)}}function Le(i,t){i&1&&s(0," Seleccione usuarios a los cuales enviar notificaci\xF3n ")}function ze(i,t){i&1&&s(0," Seleccione los usuarios para excluir la notificaci\xF3n ")}function Be(i,t){i&1&&(a(0,"p",38),s(1,"Buscando\u2026"),r())}function $e(i,t){if(i&1&&(a(0,"p",39),s(1),r()),i&2){let e=d(2);l(),x(e.userSearchError())}}function je(i,t){if(i&1){let e=C();a(0,"button",42),u("click",function(){let o=m(e).$implicit,c=d(3);return p(c.addSelectedUser(o))}),a(1,"div",43)(2,"span",44),s(3),r(),a(4,"span",26),s(5),r()(),a(6,"span",45),s(7,"+"),r()()}if(i&2){let e=t.$implicit,n=d(3);l(3),x(n.getUserDisplayName(e)),l(2),x(e.email)}}function qe(i,t){if(i&1&&O(0,je,8,2,"button",41,R),i&2){let e=d(2);P(e.userSearchResults())}}function He(i,t){i&1&&(a(0,"p",38),s(1,"Sin resultados."),r())}function Qe(i,t){if(i&1&&s(0),i&2){let e=d(3);y(" Seleccionados (",e.selectedUsers().length,") ")}}function We(i,t){if(i&1&&s(0),i&2){let e=d(3);y(" Excluidos (",e.selectedUsers().length,") ")}}function Ye(i,t){i&1&&(a(0,"span",49),s(1,"\u2212"),r())}function Ge(i,t){if(i&1){let e=C();a(0,"button",48),u("click",function(){let o=m(e).$implicit,c=d(3);return p(c.removeSelectedUser(o))}),b(1,Ye,2,0,"span",49),a(2,"span"),s(3),r(),a(4,"span",50),s(5,"\xD7"),r()()}if(i&2){let e=t.$implicit,n=d(3);S("user-chip-excluded",n.manualRecipientMode()==="ALL_USERS")("user-chip-selected",n.manualRecipientMode()==="SELECTED_USERS"),E("title",n.manualRecipientMode()==="ALL_USERS"?"Quitar de excluidos":"Quitar"),l(),g(n.manualRecipientMode()==="ALL_USERS"?1:-1),l(2),x(n.getUserDisplayName(e))}}function Je(i,t){if(i&1&&(a(0,"div",40)(1,"span",23),b(2,Qe,1,1)(3,We,1,1),r(),a(4,"div",46),O(5,Ge,6,7,"button",47,R),r()()),i&2){let e=d(2);l(2),g(e.manualRecipientMode()==="SELECTED_USERS"?2:3),l(3),P(e.selectedUsers())}}function Ke(i,t){if(i&1){let e=C();a(0,"div",7)(1,"p",35),b(2,Le,1,0)(3,ze,1,0),r(),a(4,"label",36),s(5,"Buscar usuario"),r(),a(6,"div",14),h(7,"i",15),a(8,"input",37),u("ngModelChange",function(o){m(e);let c=d();return p(c.onUserSearchChange(o))}),r()(),b(9,Be,2,0,"p",38)(10,$e,2,1,"p",39)(11,qe,2,0)(12,He,2,0,"p",38)(13,Je,7,1,"div",40),r()}if(i&2){let e=d();l(2),g(e.manualRecipientMode()==="SELECTED_USERS"?2:3),l(6),E("ngModel",e.userSearchQuery()),l(),g(e.userSearchLoading()?9:-1),l(),g(e.userSearchError()?10:-1),l(),g(e.userSearchResults().length>0?11:e.userSearchQuery().trim().length>=2&&!e.userSearchLoading()?12:-1),l(2),g(e.selectedUsers().length>0?13:-1)}}function Xe(i,t){i&1&&s(0," Seleccione usuarios a los cuales enviar el email ")}function Ze(i,t){i&1&&s(0," Seleccione los usuarios para excluir del env\xEDo ")}function et(i,t){i&1&&(a(0,"p",38),s(1,"Buscando\u2026"),r())}function tt(i,t){if(i&1&&(a(0,"p",39),s(1),r()),i&2){let e=d(2);l(),x(e.emailUserSearchError())}}function it(i,t){if(i&1){let e=C();a(0,"button",42),u("click",function(){let o=m(e).$implicit,c=d(3);return p(c.addEmailSelectedUser(o))}),a(1,"div",43)(2,"span",44),s(3),r(),a(4,"span",26),s(5),r()(),a(6,"span",45),s(7,"+"),r()()}if(i&2){let e=t.$implicit,n=d(3);l(3),x(n.getUserDisplayName(e)),l(2),x(e.email)}}function nt(i,t){if(i&1&&O(0,it,8,2,"button",41,R),i&2){let e=d(2);P(e.emailUserSearchResults())}}function ot(i,t){i&1&&(a(0,"p",38),s(1,"Sin resultados."),r())}function at(i,t){if(i&1&&s(0),i&2){let e=d(3);y(" Seleccionados (",e.emailSelectedUsers().length,") ")}}function rt(i,t){if(i&1&&s(0),i&2){let e=d(3);y(" Excluidos (",e.emailSelectedUsers().length,") ")}}function lt(i,t){i&1&&(a(0,"span",49),s(1,"\u2212"),r())}function st(i,t){if(i&1){let e=C();a(0,"button",48),u("click",function(){let o=m(e).$implicit,c=d(3);return p(c.removeEmailSelectedUser(o))}),b(1,lt,2,0,"span",49),a(2,"span"),s(3),r(),a(4,"span",50),s(5,"\xD7"),r()()}if(i&2){let e=t.$implicit,n=d(3);S("user-chip-excluded",n.emailRecipientMode()==="ALL_USERS")("user-chip-selected",n.emailRecipientMode()==="SELECTED_USERS"),E("title",n.emailRecipientMode()==="ALL_USERS"?"Quitar de excluidos":"Quitar"),l(),g(n.emailRecipientMode()==="ALL_USERS"?1:-1),l(2),x(n.getUserDisplayName(e))}}function ct(i,t){if(i&1&&(a(0,"div",40)(1,"span",23),b(2,at,1,1)(3,rt,1,1),r(),a(4,"div",46),O(5,st,6,7,"button",47,R),r()()),i&2){let e=d(2);l(2),g(e.emailRecipientMode()==="SELECTED_USERS"?2:3),l(3),P(e.emailSelectedUsers())}}function dt(i,t){if(i&1){let e=C();a(0,"div",7)(1,"p",35),b(2,Xe,1,0)(3,Ze,1,0),r(),a(4,"label",51),s(5,"Buscar usuario"),r(),a(6,"div",14),h(7,"i",15),a(8,"input",52),u("ngModelChange",function(o){m(e);let c=d();return p(c.onEmailUserSearchChange(o))}),r()(),b(9,et,2,0,"p",38)(10,tt,2,1,"p",39)(11,nt,2,0)(12,ot,2,0,"p",38)(13,ct,7,1,"div",40),r()}if(i&2){let e=d();l(2),g(e.emailRecipientMode()==="SELECTED_USERS"?2:3),l(6),E("ngModel",e.emailUserSearchQuery()),l(),g(e.emailUserSearchLoading()?9:-1),l(),g(e.emailUserSearchError()?10:-1),l(),g(e.emailUserSearchResults().length>0?11:e.emailUserSearchQuery().trim().length>=2&&!e.emailUserSearchLoading()?12:-1),l(2),g(e.emailSelectedUsers().length>0?13:-1)}}function mt(i,t){if(i&1){let e=C();a(0,"div",9)(1,"button",53),u("click",function(){m(e);let o=d();return p(o.setStep("list"))}),h(2,"i",54),a(3,"span"),s(4,"Listado"),r()(),a(5,"button",53),u("click",function(){m(e);let o=d();return p(o.setStep("send"))}),h(6,"i",55),a(7,"span"),s(8,"Enviar notificaci\xF3n"),r()(),a(9,"button",53),u("click",function(){m(e);let o=d();return p(o.setStep("send_email"))}),h(10,"i",56),a(11,"span"),s(12,"Enviar email"),r()()()}if(i&2){let e=d();l(),S("active",e.activeStep()==="list"),k("aria-selected",e.activeStep()==="list"),l(4),S("active",e.activeStep()==="send"),k("aria-selected",e.activeStep()==="send"),l(4),S("active",e.activeStep()==="send_email"),k("aria-selected",e.activeStep()==="send_email")}}function pt(i,t){if(i&1&&(a(0,"p",39),s(1),r()),i&2){let e=d(2);l(),x(e.emailError())}}function ut(i,t){if(i&1){let e=C();a(0,"li",34),u("click",function(){let o=m(e).$implicit,c=d(2);return c.onEmailRecipientModeChange(o.value),p(c.emailRecipientOpen.set(!1))}),s(1),r()}if(i&2){let e=t.$implicit,n=d(2);S("selected",n.emailRecipientMode()===e.value),l(),y(" ",e.label," ")}}function _t(i,t){if(i&1){let e=C();a(0,"li",81)(1,"span",82),s(2),r(),a(3,"button",83),u("click",function(){let o=m(e).$index,c=d(3);return p(c.removeEmailAttachment(o))}),h(4,"i",84),r()()}if(i&2){let e=t.$implicit;l(2),x(e.name)}}function gt(i,t){if(i&1&&(a(0,"ul",79),O(1,_t,5,1,"li",81,Z),r()),i&2){let e=d(2);l(),P(e.emailAttachments())}}function ft(i,t){if(i&1&&(a(0,"div",87)(1,"div",88)(2,"span",89),s(3,"Destinatarios"),r(),a(4,"b",90),s(5),r()(),a(6,"div",88)(7,"span",89),s(8,"Enviados"),r(),a(9,"b",90),s(10),r()()()),i&2){let e,n,o=d(3);l(5),x((e=o.emailResult())==null?null:e.totalRecipients),l(5),x((n=o.emailResult())==null?null:n.sentCount)}}function xt(i,t){if(i&1&&(a(0,"div",85)(1,"p",86),s(2),r(),b(3,ft,11,2,"div",87),r()),i&2){let e,n,o,c=d(2);S("admin-manual-result-queued",(e=c.emailResult())==null?null:e.queued),l(2),x((n=c.emailResult())==null?null:n.message),l(),g((o=c.emailResult())!=null&&o.queued?-1:3)}}function ht(i,t){if(i&1){let e=C();a(0,"section",10)(1,"div",57)(2,"h2",58),s(3,"Enviar email"),r(),a(4,"button",59),u("click",function(){m(e);let o=d();return p(o.sendBulkEmail())}),h(5,"i",56),s(6),r()(),b(7,pt,2,1,"p",39),a(8,"div",60)(9,"div",61)(10,"div",62)(11,"label",23),s(12,"Destinatario"),r(),a(13,"div",18),u("click",function(o){return m(e),p(o.stopPropagation())}),a(14,"button",19),u("click",function(){m(e);let o=d();return p(o.emailRecipientOpen.set(!o.emailRecipientOpen()))}),a(15,"span"),s(16),r(),h(17,"i",20),r(),a(18,"ul",21),O(19,ut,2,3,"li",22,D),r()()()(),a(21,"div",61)(22,"div",63)(23,"label",64),s(24,"Asunto"),r(),a(25,"input",65),u("ngModelChange",function(o){m(e);let c=d();return p(c.emailSubject.set(o))}),r()()(),a(26,"div",61)(27,"div",66)(28,"label",23),s(29,"Contenido (HTML)"),r(),a(30,"div",67)(31,"div",68),h(32,"ngx-editor-menu",69),a(33,"button",70),u("mousedown",function(o){m(e);let c=d();return p(c.insertEmailLineBreak(o))}),h(34,"i",71),s(35," Salto "),r(),a(36,"button",72),u("click",function(){m(e);let o=d();return p(o.resetEmailEditor())}),h(37,"i",73),r()(),a(38,"ngx-editor",74),u("ngModelChange",function(o){m(e);let c=d();return p(c.emailBody.set(o))}),r()()()(),a(39,"div",61)(40,"div",63)(41,"label",23),s(42,"Adjuntos"),r(),a(43,"div",75),u("dragover",function(o){m(e);let c=d();return p(c.onEmailDragOver(o))})("dragleave",function(o){m(e);let c=d();return p(c.onEmailDragLeave(o))})("drop",function(o){m(e);let c=d();return p(c.onEmailDrop(o))}),a(44,"label",76)(45,"input",77),u("change",function(o){m(e);let c=d();return p(c.onEmailFilesSelected(o))}),r(),a(46,"span"),h(47,"i",78),s(48," Arrastra archivos aqu\xED o haz clic para elegir"),r()()(),b(49,gt,3,0,"ul",79),r()()(),b(50,xt,4,4,"div",80),r()}if(i&2){let e=d();l(4),E("disabled",e.emailSending()),l(2),y(" ",e.emailSending()?"Enviando\u2026":"Enviar email"," "),l(),g(e.emailError()?7:-1),l(6),S("open",e.emailRecipientOpen()),l(),k("aria-expanded",e.emailRecipientOpen()),l(2),x(e.getEmailRecipientLabel()),l(3),P(e.manualRecipientOptions),l(6),E("ngModel",e.emailSubject()),l(7),E("editor",e.emailEditor)("toolbar",e.emailEditorToolbar),l(6),E("editor",e.emailEditor)("ngModel",e.emailBody()),l(5),S("drag-over",e.emailDragOver()),l(6),g(e.emailAttachments().length>0?49:-1),l(),g(e.emailResult()?50:-1)}}function bt(i,t){if(i&1&&(a(0,"p",39),s(1),r()),i&2){let e=d(2);l(),x(e.manualError())}}function Ct(i,t){if(i&1){let e=C();a(0,"li",34),u("click",function(){let o=m(e).$implicit,c=d(2);return c.onRecipientModeChange(o.value),p(c.manualRecipientOpen.set(!1))}),s(1),r()}if(i&2){let e=t.$implicit,n=d(2);S("selected",n.manualRecipientMode()===e.value),l(),y(" ",e.label," ")}}function vt(i,t){if(i&1){let e=C();a(0,"li",34),u("click",function(){let o=m(e).$implicit,c=d(2);return c.manualType.set(o.value),p(c.manualTypeOpen.set(!1))}),s(1),r()}if(i&2){let e=t.$implicit,n=d(2);S("selected",n.manualType()===e.value),l(),y(" ",e.label," ")}}function St(i,t){if(i&1&&(a(0,"div",85)(1,"p",86),s(2),r(),a(3,"div",87)(4,"div",88)(5,"span",89),s(6,"Total"),r(),a(7,"b",90),s(8),r()(),a(9,"div",88)(10,"span",89),s(11,"Enviadas"),r(),a(12,"b",90),s(13),r()(),a(14,"div",88)(15,"span",89),s(16,"Pendientes"),r(),a(17,"b",90),s(18),r()(),a(19,"div",88)(20,"span",89),s(21,"Excluidas"),r(),a(22,"b",90),s(23),r()()()()),i&2){let e,n,o,c,v,f=d(2);l(2),x((e=f.manualResult())==null?null:e.message),l(6),x((n=f.manualResult())==null?null:n.totalRecipients),l(5),x((o=f.manualResult())==null?null:o.sentImmediately),l(5),x((c=f.manualResult())==null?null:c.pendingDelivery),l(5),x((v=f.manualResult())==null?null:v.excludedByPreferences)}}function Et(i,t){if(i&1){let e=C();a(0,"section",11)(1,"div",57)(2,"h2",58),s(3,"Enviar notificaci\xF3n"),r(),a(4,"button",59),u("click",function(){m(e);let o=d();return p(o.sendManualNotification())}),h(5,"i",91),s(6),r()(),b(7,bt,2,1,"p",39),a(8,"div",60)(9,"div",61)(10,"div",62)(11,"label",23),s(12,"Destinatario"),r(),a(13,"div",18),u("click",function(o){return m(e),p(o.stopPropagation())}),a(14,"button",19),u("click",function(){m(e);let o=d();return p(o.manualRecipientOpen.set(!o.manualRecipientOpen()))}),a(15,"span"),s(16),r(),h(17,"i",20),r(),a(18,"ul",21),O(19,Ct,2,3,"li",22,D),r()()(),a(21,"div",92)(22,"label",23),s(23,"Tipo"),r(),a(24,"div",18),u("click",function(o){return m(e),p(o.stopPropagation())}),a(25,"button",19),u("click",function(){m(e);let o=d();return p(o.manualTypeOpen.set(!o.manualTypeOpen()))}),a(26,"span"),s(27),r(),h(28,"i",20),r(),a(29,"ul",21),O(30,vt,2,3,"li",22,D),r()()()(),a(32,"div",61)(33,"div",63)(34,"label",93),s(35,"T\xEDtulo"),r(),a(36,"input",94),u("ngModelChange",function(o){m(e);let c=d();return p(c.manualTitle.set(o))}),r()()(),a(37,"div",61)(38,"div",63)(39,"label",95),s(40,"Mensaje"),r(),a(41,"textarea",96),u("ngModelChange",function(o){m(e);let c=d();return p(c.manualMessage.set(o))}),r(),a(42,"p",97),s(43),r()()()(),b(44,St,24,5,"div",85),r()}if(i&2){let e=d();l(4),E("disabled",e.manualSending()),l(2),y(" ",e.manualSending()?"Enviando\u2026":"Enviar"," "),l(),g(e.manualError()?7:-1),l(6),S("open",e.manualRecipientOpen()),l(),k("aria-expanded",e.manualRecipientOpen()),l(2),x(e.getManualRecipientLabel()),l(3),P(e.manualRecipientOptions),l(5),S("open",e.manualTypeOpen()),l(),k("aria-expanded",e.manualTypeOpen()),l(2),x(e.getManualTypeLabel()),l(3),P(e.manualTypeOptions),l(6),E("ngModel",e.manualTitle()),l(5),E("ngModel",e.manualMessage()),l(2),y("",e.manualMessage().length,"/2000"),l(),g(e.manualResult()?44:-1)}}function yt(i,t){if(i&1&&(s(0," Tienes "),a(1,"span",106),s(2),r()),i&2){let e=d(2);l(2),te("",e.unreadCount()," notificaci\xF3n",e.unreadCount()!==1?"es":""," nueva",e.unreadCount()!==1?"s":"","")}}function Mt(i,t){i&1&&s(0," No tienes notificaciones nuevas ")}function wt(i,t){if(i&1){let e=C();a(0,"button",107),u("click",function(){m(e);let o=d(2);return p(o.markAllAsRead())}),h(1,"i",108),a(2,"span"),s(3,"Marcar todas como le\xEDdas"),r()()}}function Ot(i,t){if(i&1&&(a(0,"p",103),s(1),r()),i&2){let e=d(2);l(),x(e.error())}}function Pt(i,t){i&1&&(a(0,"p",104),s(1,"Cargando\u2026"),r())}function kt(i,t){i&1&&(a(0,"div",105),h(1,"i",109),a(2,"p"),s(3,"No tienes notificaciones con los filtros aplicados."),r()())}function Tt(i,t){i&1&&h(0,"span",114)}function Nt(i,t){if(i&1){let e=C();a(0,"button",126),u("click",function(o){m(e);let c=d().$implicit,v=d(3);return p(v.toggleMessageExpanded(c,o))}),s(1),r()}if(i&2){let e=d().$implicit,n=d(3);l(),y(" ",n.isMessageExpanded(e.id)?"Ver menos":"Ver mas"," ")}}function Dt(i,t){if(i&1){let e=C();a(0,"button",127),u("click",function(o){m(e);let c=d().$implicit;return d(3).markAsRead(c),p(o.stopPropagation())}),h(1,"i",128),r()}}function Rt(i,t){if(i&1){let e=C();a(0,"button",129),u("click",function(o){m(e);let c=d().$implicit;return d(3).deleteNotification(c),p(o.stopPropagation())}),h(1,"i",130),r()}}function Ut(i,t){if(i&1){let e=C();a(0,"article",113),u("click",function(){let o=m(e).$implicit,c=d(3);return p(!o.read&&c.markAsRead(o))}),b(1,Tt,1,0,"span",114),a(2,"div",115),h(3,"i",116),r(),a(4,"div",117)(5,"div",118)(6,"h3",119),s(7),r(),a(8,"span",120),s(9),r()(),a(10,"p",121),s(11),r(),b(12,Nt,2,1,"button",122),r(),a(13,"div",123),b(14,Dt,2,0,"button",124)(15,Rt,2,0,"button",125),r()()}if(i&2){let e=t.$implicit,n=d(3);S("notif-card-unread",!e.read),l(),g(e.read?-1:1),l(),E("ngClass",n.getIcon(e.type).colorClass),l(),X(n.getIcon(e.type).icon),l(4),x(e.title),l(2),x(n.getRelativeTime(e.createdAt)),l(),S("expanded",n.isMessageExpanded(e.id)),l(),x(e.message),l(),g(n.hasLongMessage(e.message)?12:-1),l(2),g(e.read?15:14)}}function Vt(i,t){if(i&1){let e=C();a(0,"div",112)(1,"button",131),u("click",function(){m(e);let o=d(3);return p(o.goToPage(o.currentPage()-1))}),h(2,"i",132),s(3," Anterior "),r(),a(4,"div",133),s(5," P\xE1gina "),a(6,"strong"),s(7),r(),s(8),r(),a(9,"button",131),u("click",function(){m(e);let o=d(3);return p(o.goToPage(o.currentPage()+1))}),s(10," Siguiente "),h(11,"i",134),r()()}if(i&2){let e=d(3);l(),E("disabled",e.currentPage()===0),l(6),x(e.currentPage()+1),l(),y(" de ",e.totalPages()," "),l(),E("disabled",e.currentPage()>=e.totalPages()-1)}}function Ft(i,t){if(i&1&&(a(0,"div",110),O(1,Ut,16,13,"article",111,R),r(),b(3,Vt,12,4,"div",112)),i&2){let e=d(2);l(),P(e.notifications()),l(2),g(e.totalPages()>1?3:-1)}}function It(i,t){if(i&1&&(a(0,"header",98)(1,"div",99)(2,"h2",100),s(3,"Listado"),r(),a(4,"p",101),b(5,yt,3,3)(6,Mt,1,0),r()(),b(7,wt,4,0,"button",102),r(),b(8,Ot,2,1,"p",103)(9,Pt,2,0,"p",104)(10,kt,4,0,"div",105)(11,Ft,4,1)),i&2){let e=d();l(5),g(e.unreadCount()>0?5:6),l(2),g(e.unreadCount()>0?7:-1),l(),g(e.error()?8:-1),l(),g(e.loading()?9:e.notifications().length===0?10:11)}}function At(i,t){if(i&1&&(a(0,"li",140)(1,"span",143),s(2),r(),a(3,"span",144),s(4),r()()),i&2){let e=t.$implicit;l(2),ee("",e.firstName," ",e.lastName,""),l(2),x(e.email)}}function Lt(i,t){if(i&1){let e=C();a(0,"div",135),u("click",function(o){return m(e),p(o.stopPropagation())}),a(1,"div",136),u("click",function(o){return m(e),p(o.stopPropagation())}),a(2,"h2",137),s(3,"Estos usuarios tienen la preferencia desactivada"),r(),a(4,"p",138),s(5,"No recibir\xE1n el email porque tienen desactivadas las alertas por correo en Configuraci\xF3n."),r(),a(6,"ul",139),O(7,At,5,3,"li",140,De),r(),a(9,"div",141)(10,"button",142),u("click",function(){m(e);let o=d();return p(o.closeEmailExcludedModalAndSend())}),s(11," Entendido "),r()()()()}if(i&2){let e=d();l(7),P(e.emailExcludedList())}}var Oe=class i{notificationService=w(Ce);adminManualNotificationService=w(I);adminUserService=w(Ee);adminEmailService=w(A);authStateService=w(se);ws=w(ce);destroyRef=w(Y);elementRef=w(G);authState=le(this.authStateService.authState,{initialValue:{isAuthenticated:!1,user:null,isLoading:!1}});notifications=_([]);expandedMessages=_({});unreadCount=_(0);totalElements=_(0);totalPages=_(0);currentPage=_(0);pageSize=8;loading=_(!0);error=_(null);readFilter=_("all");typeFilter=_("");dateFrom=_("");dateTo=_("");searchText=_("");typeFilterOptions=Me;readFilterOptions=[{value:"all",label:"Todas"},{value:"unread",label:"No le\xEDdas"},{value:"read",label:"Le\xEDdas"}];manualRecipientOptions=[{value:"ALL_USERS",label:"Todos los usuarios"},{value:"SELECTED_USERS",label:"Usuarios seleccionados"}];typeFilterOpen=_(!1);readFilterOpen=_(!1);manualRecipientOpen=_(!1);manualTypeOpen=_(!1);emailRecipientOpen=_(!1);activeStep=_("list");emailEditor=new he({plugins:[be()]});emailEditorToolbar=fe;emailSubject=_("");emailBody=_("");emailRecipientMode=_("ALL_USERS");emailSelectedUsers=_([]);emailUserSearchQuery=_("");emailUserSearchLoading=_(!1);emailUserSearchError=_(null);emailUserSearchResults=_([]);emailSending=_(!1);emailError=_(null);emailResult=_(null);emailAttachments=_([]);emailDragOver=_(!1);emailExcludedModalVisible=_(!1);emailExcludedList=_([]);emailPendingSendBody=null;emailPendingSendFiles=[];isAdmin=ie(()=>!!this.authState()?.user?.roles?.includes("ROLE_ADMIN"));getIcon=ve;getRelativeTime=Se;getTypeFilterLabel(){let t=this.typeFilter();return this.typeFilterOptions.find(e=>e.value===t)?.label??"Todos los tipos"}getReadFilterLabel(){return this.readFilterOptions.find(t=>t.value===this.readFilter())?.label??"Todas"}getManualRecipientLabel(){return this.manualRecipientOptions.find(t=>t.value===this.manualRecipientMode())?.label??"Todos los usuarios"}getManualTypeLabel(){return this.manualTypeOptions.find(t=>t.value===this.manualType())?.label??"Anuncio"}closeAllSelects(){this.typeFilterOpen.set(!1),this.readFilterOpen.set(!1),this.manualRecipientOpen.set(!1),this.manualTypeOpen.set(!1),this.emailRecipientOpen.set(!1)}manualRecipientMode=_("ALL_USERS");manualType=_("ADMIN_ANNOUNCEMENT");manualTitle=_("");manualMessage=_("");manualSending=_(!1);manualError=_(null);manualResult=_(null);userSearchQuery=_("");userSearchLoading=_(!1);userSearchError=_(null);userSearchResults=_([]);selectedUsers=_([]);manualTypeOptions=[{value:"ADMIN_ANNOUNCEMENT",label:"Anuncio"},{value:"SYSTEM_MAINTENANCE",label:"Mantenimiento del sistema"},{value:"IMPORTANT_UPDATE",label:"Actualizaci\xF3n importante"},{value:"PROMOTION",label:"Promoci\xF3n / Oferta"},{value:"REMINDER",label:"Recordatorio general"}];ngOnInit(){!this.isAdmin()&&(this.activeStep()==="send"||this.activeStep()==="send_email")&&this.activeStep.set("list");let t=history.state;t?.preselectedEmails?.length&&this.isAdmin()&&(this.activeStep.set("send"),this.manualRecipientMode.set("SELECTED_USERS"),this.selectedUsers.set(t.preselectedEmails.map((e,n)=>({id:n,email:e,firstName:"",lastName:""})))),this.ws.messages.pipe(q(e=>e.type==="NOTIFICATION_COUNT_UPDATED"),re(this.destroyRef)).subscribe(()=>{this.activeStep()==="list"&&this.applyFilters()}),this.applyFilters()}setStep(t){(t==="send"||t==="send_email")&&!this.isAdmin()||(this.closeAllSelects(),this.activeStep.set(t),this.manualError.set(null),this.manualResult.set(null),this.emailError.set(null),this.emailResult.set(null),t==="list"&&(this.selectedUsers.set([]),this.userSearchQuery.set(""),this.userSearchResults.set([]),this.emailSelectedUsers.set([]),this.emailUserSearchQuery.set(""),this.emailUserSearchResults.set([])))}ngOnDestroy(){this.emailEditor.destroy()}getEmailRecipientLabel(){return this.manualRecipientOptions.find(t=>t.value===this.emailRecipientMode())?.label??"Todos los usuarios"}onEmailRecipientModeChange(t){this.emailRecipientMode.set(t)}onEmailUserSearchChange(t){let e=(t??"").trim();if(this.emailUserSearchQuery.set(t??""),this.emailUserSearchError.set(null),this.emailUserSearchResults.set([]),e.length<2){this.emailUserSearchLoading.set(!1);return}this.emailUserSearchLoading.set(!0),this.adminUserService.searchUsers({query:e,limit:10}).subscribe({next:n=>{let o=new Set(this.emailSelectedUsers().map(c=>c.id));this.emailUserSearchResults.set((n??[]).filter(c=>!o.has(c.id))),this.emailUserSearchLoading.set(!1)},error:()=>{this.emailUserSearchError.set("No se pudo buscar usuarios."),this.emailUserSearchLoading.set(!1)}})}addEmailSelectedUser(t){!t?.email||this.emailSelectedUsers().some(n=>n.id===t.id||n.email===t.email)||(this.emailSelectedUsers.update(n=>[...n,t]),this.emailUserSearchResults.update(n=>n.filter(o=>o.id!==t.id)))}removeEmailSelectedUser(t){this.emailSelectedUsers.update(e=>e.filter(n=>n.id!==t.id))}sendBulkEmail(){this.emailError.set(null),this.emailResult.set(null);let t=this.emailSubject().trim(),e=this.emailBody().trim();if(!t){this.emailError.set("El asunto es obligatorio.");return}if(!e||e==="<p></p>"){this.emailError.set("El contenido del email es obligatorio.");return}let n=this.emailRecipientMode();if(n==="SELECTED_USERS"&&this.emailSelectedUsers().length===0){this.emailError.set("Debes seleccionar al menos un usuario.");return}let o={subject:t,htmlBody:e,recipientType:n,excludedEmails:n==="ALL_USERS"?this.emailSelectedUsers().map(f=>f.email):void 0,recipientEmails:n==="SELECTED_USERS"?this.emailSelectedUsers().map(f=>f.email):void 0},c=this.emailAttachments(),v={recipientType:o.recipientType,excludedEmails:o.excludedEmails,recipientEmails:o.recipientEmails};this.emailSending.set(!0),this.adminEmailService.checkRecipients(v).subscribe({next:f=>{let T=f?.excludedByPreference??[];T.length>0?(this.emailExcludedList.set(T),this.emailPendingSendBody=o,this.emailPendingSendFiles=[...c],this.emailExcludedModalVisible.set(!0)):this.doActualSend(o,c),this.emailSending.set(!1)},error:f=>{this.emailError.set(f?.error?.message??"No se pudo comprobar destinatarios."),this.emailSending.set(!1)}})}closeEmailExcludedModalAndSend(){this.emailExcludedModalVisible.set(!1);let t=this.emailPendingSendBody,e=this.emailPendingSendFiles;this.emailPendingSendBody=null,this.emailPendingSendFiles=[],t&&(this.emailSending.set(!0),this.doActualSend(t,e))}doActualSend(t,e){this.adminEmailService.sendBulkEmail(t,e).subscribe({next:n=>{this.emailResult.set(n),this.emailSending.set(!1),this.emailAttachments.set([])},error:n=>{this.emailError.set(n?.error?.message??"No se pudo enviar el email."),this.emailSending.set(!1)}})}onEmailFilesSelected(t){let e=t.target,n=e.files;n?.length&&(this.emailAttachments.update(o=>[...o,...Array.from(n)]),e.value="")}removeEmailAttachment(t){this.emailAttachments.update(e=>e.filter((n,o)=>o!==t))}onEmailDragOver(t){t.preventDefault(),t.stopPropagation(),this.emailDragOver.set(!0)}onEmailDragLeave(t){t.preventDefault(),t.stopPropagation(),this.emailDragOver.set(!1)}onEmailDrop(t){t.preventDefault(),t.stopPropagation(),this.emailDragOver.set(!1);let e=t.dataTransfer?.files;e?.length&&this.emailAttachments.update(n=>[...n,...Array.from(e)])}resetEmailEditor(){this.emailBody.set("")}insertEmailLineBreak(t){t?.preventDefault();let e=this.emailEditor?.view;if(!e)return;let{state:n,dispatch:o}=e,c=n.tr.insertText("<br>",n.selection.from);o(c.scrollIntoView())}onRecipientModeChange(t){this.manualRecipientMode.set(t)}onUserSearchChange(t){let e=(t??"").trim();if(this.userSearchQuery.set(t??""),this.userSearchError.set(null),this.userSearchResults.set([]),e.length<2){this.userSearchLoading.set(!1);return}this.userSearchLoading.set(!0),this.adminUserService.searchUsers({query:e,limit:10}).subscribe({next:n=>{let o=new Set(this.selectedUsers().map(c=>c.id));this.userSearchResults.set((n??[]).filter(c=>!o.has(c.id))),this.userSearchLoading.set(!1)},error:()=>{this.userSearchError.set("No se pudo buscar usuarios."),this.userSearchLoading.set(!1)}})}addSelectedUser(t){!t?.email||this.selectedUsers().some(n=>n.id===t.id||n.email===t.email)||(this.selectedUsers.update(n=>[...n,t]),this.userSearchResults.update(n=>n.filter(o=>o.id!==t.id)))}removeSelectedUser(t){this.selectedUsers.update(e=>e.filter(n=>n.id!==t.id))}getUserDisplayName(t){let e=(t.firstName??"").trim(),n=(t.lastName??"").trim();return`${e} ${n}`.trim()||t.email}applyFilters(){this.loadPage(0)}onTypeFilterChange(t){this.typeFilter.set(t),this.applyFilters()}onReadFilterChange(t){this.readFilter.set(t),this.applyFilters()}onDateFromChange(t){this.dateFrom.set(t),this.applyFilters()}onDateToChange(t){this.dateTo.set(t),this.applyFilters()}clearFilters(){this.readFilter.set("all"),this.typeFilter.set(""),this.dateFrom.set(""),this.dateTo.set(""),this.searchText.set(""),this.applyFilters()}loadPage(t){this.loading.set(!0),this.error.set(null);let e=this.readFilter()==="all"?void 0:this.readFilter()!=="unread",n=this.typeFilter()||void 0,o=this.dateFrom()||void 0,c=this.dateTo()||void 0,v=this.searchText().trim()||void 0;this.notificationService.getNotifications({page:t,size:this.pageSize,read:e,type:n,dateFrom:o,dateTo:c,search:v}).subscribe({next:f=>{this.notifications.set(f.notifications??[]),this.expandedMessages.set({}),this.totalElements.set(f.totalElements),this.totalPages.set(f.totalPages),this.currentPage.set(f.page),this.unreadCount.set(f.unreadCount),this.loading.set(!1)},error:()=>{this.error.set("No se pudieron cargar las notificaciones."),this.loading.set(!1)}})}goToPage(t){t>=0&&t<this.totalPages()&&this.loadPage(t)}markAsRead(t){t.read||this.notificationService.markAsRead(t.id).subscribe({next:()=>{t.read=!0,this.unreadCount.update(e=>Math.max(0,e-1)),this.notificationService.notifyUnreadCountChanged()}})}markAllAsRead(){this.unreadCount()!==0&&this.notificationService.markAllAsRead().subscribe({next:()=>{this.unreadCount.set(0),this.notifications.update(t=>t.map(e=>z(L({},e),{read:!0}))),this.notificationService.notifyUnreadCountChanged()},error:()=>{}})}deleteNotification(t){this.notificationService.deleteNotification(t.id).subscribe({next:()=>{this.notifications.update(e=>e.filter(n=>n.id!==t.id)),t.read||this.unreadCount.update(e=>Math.max(0,e-1)),this.notificationService.notifyUnreadCountChanged()}})}isMessageExpanded(t){return!!this.expandedMessages()[t]}hasLongMessage(t){return(t?.trim().length??0)>110}toggleMessageExpanded(t,e){e.stopPropagation();let n=t.id;this.expandedMessages.update(o=>z(L({},o),{[n]:!o[n]}))}sendManualNotification(){this.manualError.set(null),this.manualResult.set(null);let t=this.manualRecipientMode(),e=this.manualTitle().trim(),n=this.manualMessage().trim();if(t==="SELECTED_USERS"&&this.selectedUsers().length===0){this.manualError.set("Debes seleccionar al menos un usuario.");return}if(!e){this.manualError.set("El t\xEDtulo es obligatorio.");return}if(!n){this.manualError.set("El mensaje es obligatorio.");return}if(this.manualSending.set(!0),t==="ALL_USERS"){let c=this.selectedUsers().map(f=>f.email),v={recipientType:"ALL_USERS",recipientEmail:null,type:this.manualType(),title:e,message:n,excludedEmails:c.length>0?c:void 0};this.adminManualNotificationService.sendManualNotification(v).subscribe({next:f=>{this.manualResult.set(f),this.manualSending.set(!1)},error:f=>{let T=f?.error?.message??"No se pudo enviar la notificaci\xF3n.";this.manualError.set(T),this.manualSending.set(!1)}});return}let o=this.selectedUsers();B(o).pipe(W(c=>{let v={recipientType:"SPECIFIC_USER",recipientEmail:c.email,type:this.manualType(),title:e,message:n};return this.adminManualNotificationService.sendManualNotification(v).pipe(j(f=>({ok:!0,res:f})),H(f=>$({ok:!1,err:f,user:c})))}),Q()).subscribe({next:c=>{let v=c.filter(M=>M.ok),f=c.filter(M=>!M.ok),T={success:f.length===0,totalRecipients:o.length,sentImmediately:v.reduce((M,N)=>M+(N.res.sentImmediately??0),0),pendingDelivery:v.reduce((M,N)=>M+(N.res.pendingDelivery??0),0),excludedByPreferences:v.reduce((M,N)=>M+(N.res.excludedByPreferences??0),0),notificationIds:v.flatMap(M=>M.res.notificationIds??[]),message:f.length===0?`Notificaci\xF3n enviada a ${o.length} usuario(s).`:`Enviado a ${v.length}/${o.length}. Fallaron ${f.length}.`};this.manualResult.set(T),f.length>0&&this.manualError.set(`No se pudo enviar a: ${f.map(M=>M.user.email).join(", ")}`),this.manualSending.set(!1)},error:()=>{this.manualError.set("No se pudo enviar la notificaci\xF3n."),this.manualSending.set(!1)}})}onDocumentClick(t){let e=this.elementRef.nativeElement,n=t.target;if(!e.contains(n)){this.closeAllSelects();return}let o=e.querySelectorAll(".custom-select");Array.from(o).some(v=>v.contains(n))||this.closeAllSelects()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=K({type:i,selectors:[["app-dashboard-notificaciones"]],hostBindings:function(e,n){e&1&&u("click",function(c){return n.onDocumentClick(c)},!1,J)},decls:21,vars:7,consts:[[1,"notif-container"],[1,"management-main"],[1,"management-sidebar"],[1,"sidebar-header"],[1,"management-title"],[1,"dashboard-title-prefix"],[1,"management-subtitle"],[1,"filter-card"],[1,"notifications-area"],["role","tablist","aria-label","Secciones de notificaciones",1,"notif-steps"],["aria-label","Enviar email",1,"admin-manual-panel"],["aria-label","Enviar notificaci\xF3n manual",1,"admin-manual-panel"],[1,"email-excluded-modal-overlay"],["for","notif-search",1,"filter-label"],[1,"search-box"],["aria-hidden","true",1,"fas","fa-search","search-icon"],["id","notif-search","type","text","placeholder","T\xEDtulo o mensaje...",1,"search-input",3,"ngModelChange","keyup.enter","ngModel"],["for","notif-type",1,"filter-label"],[1,"custom-select",3,"click"],["type","button","aria-haspopup","listbox",1,"custom-select-trigger",3,"click"],["aria-hidden","true",1,"fas","fa-chevron-down","custom-select-chevron"],["role","listbox",1,"custom-select-dropdown"],["role","option",3,"selected"],[1,"filter-label"],[1,"date-inputs"],[1,"date-group"],[1,"date-label"],["type","date","aria-label","Desde",1,"styled-input",3,"ngModelChange","ngModel"],["type","date","aria-label","Hasta",1,"styled-input",3,"ngModelChange","ngModel"],[1,"filter-card","border-none"],["type","button",1,"btn","btn-primary","w-full","mb-2",3,"click"],["aria-hidden","true",1,"fas","fa-filter"],["type","button",1,"btn","btn-secondary","w-full",3,"click"],["aria-hidden","true",1,"fas","fa-undo"],["role","option",3,"click"],[1,"user-search-hint"],["for","user-search",1,"filter-label"],["id","user-search","type","text","placeholder","Email o nombre...",1,"search-input",3,"ngModelChange","ngModel"],[1,"admin-send-hint"],["role","alert",1,"admin-manual-error"],[1,"selected-users"],["type","button",1,"state-filter-item"],["type","button",1,"state-filter-item",3,"click"],[1,"state-identifier-col"],[1,"state-name"],["aria-hidden","true",1,"state-name"],[1,"selected-users-list"],["type","button",3,"user-chip-excluded","user-chip-selected","title"],["type","button",3,"click","title"],["aria-hidden","true",1,"excluded-badge"],["aria-hidden","true",1,"remove-icon"],["for","email-user-search",1,"filter-label"],["id","email-user-search","type","text","placeholder","Email o nombre...",1,"search-input",3,"ngModelChange","ngModel"],["type","button","role","tab",1,"notif-step-btn",3,"click"],["aria-hidden","true",1,"fas","fa-list"],["aria-hidden","true",1,"fas","fa-bell"],["aria-hidden","true",1,"fas","fa-envelope"],[1,"admin-manual-panel-head"],[1,"admin-manual-title"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"admin-manual-form"],[1,"admin-manual-row"],[1,"admin-manual-field","admin-manual-field-recipient"],[1,"admin-manual-field","admin-manual-field-grow"],["for","emailSubject",1,"filter-label"],["id","emailSubject","type","text","maxlength","200","placeholder","Asunto del email\u2026",1,"styled-input",3,"ngModelChange","ngModel"],[1,"admin-manual-field","admin-manual-field-grow","form-group-editor"],[1,"rich-editor-wrapper","NgxEditor__Wrapper"],[1,"rich-editor-toolbar-row"],[3,"editor","toolbar"],["type","button","title","Insertar salto de l\xEDnea (<br>)",1,"editor-toolbar-btn",3,"mousedown"],["aria-hidden","true",1,"fas","fa-arrows-alt-v"],["type","button","title","Vaciar contenido del editor",1,"editor-reset-btn",3,"click"],["aria-hidden","true",1,"fas","fa-eraser"],["outputFormat","html","placeholder","Escribe el contenido del email con formato (negrita, listas, enlaces\u2026)",3,"ngModelChange","editor","ngModel"],[1,"email-attachments-dropzone",3,"dragover","dragleave","drop"],[1,"email-attachments-dropzone-label"],["type","file","multiple","","accept","*/*",3,"change"],["aria-hidden","true",1,"fas","fa-cloud-upload-alt"],[1,"email-attachments-list"],["role","status",1,"admin-manual-result",3,"admin-manual-result-queued"],[1,"email-attachment-item"],[1,"email-attachment-name"],["type","button","title","Quitar",1,"email-attachment-remove",3,"click"],["aria-hidden","true",1,"fas","fa-times"],["role","status",1,"admin-manual-result"],[1,"admin-manual-result-message"],[1,"admin-manual-result-grid"],[1,"admin-manual-result-item"],[1,"admin-manual-result-label"],[1,"admin-manual-result-value"],["aria-hidden","true",1,"fas","fa-paper-plane"],[1,"admin-manual-field","admin-manual-field-type"],["for","manualTitle",1,"filter-label"],["id","manualTitle","type","text","maxlength","200","placeholder","T\xEDtulo\u2026",1,"styled-input",3,"ngModelChange","ngModel"],["for","manualMessage",1,"filter-label"],["id","manualMessage","maxlength","2000","placeholder","Mensaje\u2026",1,"admin-manual-textarea",3,"ngModelChange","ngModel"],[1,"admin-manual-hint"],[1,"notif-page-header"],[1,"notif-page-header-text"],[1,"notif-page-title"],[1,"notif-page-subtitle"],["type","button",1,"notif-page-btn-primary"],["role","alert",1,"notif-page-error"],[1,"notif-page-loading"],[1,"notif-page-empty"],[1,"notif-page-subtitle-count"],["type","button",1,"notif-page-btn-primary",3,"click"],["aria-hidden","true",1,"fas","fa-check-double"],["aria-hidden","true",1,"fas","fa-bell-slash"],[1,"notif-page-list"],[1,"notif-card",3,"notif-card-unread"],[1,"modern-pagination"],[1,"notif-card",3,"click"],["aria-hidden","true",1,"notif-card-dot"],[1,"notif-card-icon",3,"ngClass"],["aria-hidden","true"],[1,"notif-card-body"],[1,"notif-card-head"],[1,"notif-card-title"],[1,"notif-card-time"],[1,"notif-card-message"],["type","button",1,"notif-card-message-toggle"],[1,"notif-card-actions"],["type","button","title","Marcar como le\xEDda",1,"notif-card-action"],["type","button","title","Eliminar",1,"notif-card-action","notif-card-action-delete"],["type","button",1,"notif-card-message-toggle",3,"click"],["type","button","title","Marcar como le\xEDda",1,"notif-card-action",3,"click"],["aria-hidden","true",1,"fas","fa-envelope-open"],["type","button","title","Eliminar",1,"notif-card-action","notif-card-action-delete",3,"click"],["aria-hidden","true",1,"fas","fa-trash-alt"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["aria-hidden","true",1,"fas","fa-chevron-left"],[1,"pag-info"],["aria-hidden","true",1,"fas","fa-chevron-right"],[1,"email-excluded-modal-overlay",3,"click"],["role","dialog","aria-labelledby","email-excluded-modal-title",1,"email-excluded-modal",3,"click"],["id","email-excluded-modal-title",1,"email-excluded-modal-title"],[1,"email-excluded-modal-hint"],[1,"email-excluded-modal-list"],[1,"email-excluded-modal-item"],[1,"email-excluded-modal-actions"],["type","button",1,"btn","btn-primary",3,"click"],[1,"email-excluded-modal-name"],[1,"email-excluded-modal-email"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"aside",2)(3,"div",3)(4,"h1",4)(5,"span",5),s(6,"/"),r(),s(7,"Notificaciones"),r(),a(8,"p",6),b(9,Re,1,0)(10,Ue,1,0)(11,Ve,1,0),r()(),b(12,Ae,47,15)(13,Ke,14,6,"div",7)(14,dt,14,6,"div",7),r(),a(15,"section",8),b(16,mt,13,9,"div",9)(17,ht,51,16,"section",10)(18,Et,45,15,"section",11)(19,It,12,4),r()()(),b(20,Lt,12,0,"div",12)),e&2&&(l(9),g(n.activeStep()==="list"?9:n.activeStep()==="send"?10:11),l(3),g(n.activeStep()==="list"?12:n.isAdmin()&&n.activeStep()==="send"?13:n.isAdmin()&&n.activeStep()==="send_email"?14:-1),l(4),g(n.isAdmin()?16:-1),l(),g(n.activeStep()==="send_email"&&n.isAdmin()?17:-1),l(),g(n.activeStep()==="send"&&n.isAdmin()?18:-1),l(),g(!n.isAdmin()||n.activeStep()==="list"?19:-1),l(),g(n.emailExcludedModalVisible()?20:-1))},dependencies:[oe,ne,_e,de,me,ue,pe,ge,xe],styles:["[_nghost-%COMP%]{flex:1;min-height:0;display:flex;flex-direction:column;overflow:hidden}.notif-container[_ngcontent-%COMP%]{flex:1;min-height:0;display:flex;flex-direction:column;overflow:hidden;background-color:var(--background-dark);color:var(--color-text-primary)}.management-main[_ngcontent-%COMP%]{flex:1;min-height:0;display:flex;overflow:hidden}.management-sidebar[_ngcontent-%COMP%]{width:30rem;flex-shrink:0;display:flex;flex-direction:column;gap:var(--spacing-lg);overflow-y:auto;background-color:var(--background-dark);padding:var(--spacing-xl);border-right:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent)}.sidebar-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.management-title[_ngcontent-%COMP%]{font-size:clamp(1.5rem,3vw,1.75rem);font-weight:800;letter-spacing:-.02em;color:var(--color-text-primary);margin:0}.management-subtitle[_ngcontent-%COMP%]{font-size:var(--font-size-body-small);color:var(--color-text-secondary);margin-top:.35rem}.filter-card[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-primary) 6%,var(--background-dark));-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);border-radius:.75rem;padding:1.25rem 1.5rem;box-shadow:0 5px 10px #00ffc31a}.filter-card.z-top[_ngcontent-%COMP%]{position:relative;z-index:10100}.filter-card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-primary);margin-bottom:1rem}.filter-card.border-none[_ngcontent-%COMP%]{border-bottom:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent)}.filter-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.08em;margin-bottom:.35rem;margin-left:.25rem;color:var(--color-text-secondary)}.search-box[_ngcontent-%COMP%]{position:relative;margin-bottom:var(--spacing-sm)}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:var(--color-text-secondary);font-size:1.25rem}.search-input[_ngcontent-%COMP%]{width:100%;min-height:3.25rem;padding:.875rem 1rem .875rem 3rem;background:color-mix(in srgb,var(--color-text-primary) 8%,transparent);border:1px solid color-mix(in srgb,var(--color-text-primary) 25%,transparent);border-radius:var(--border-radius-md);font-size:1rem;color:var(--color-text-primary);transition:border-color .2s,box-shadow .2s}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-secondary)}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px color-mix(in srgb,var(--color-primary) 25%,transparent)}.date-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.date-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem}.date-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;letter-spacing:.05em;color:var(--color-text-secondary);margin-left:.25rem}.styled-input[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;background:color-mix(in srgb,var(--color-text-primary) 8%,transparent);border:1px solid color-mix(in srgb,var(--color-text-primary) 25%,transparent);border-radius:var(--border-radius-md);font-size:1rem;color:var(--color-text-primary);transition:border-color .2s,box-shadow .2s}.styled-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px color-mix(in srgb,var(--color-primary) 25%,transparent)}.styled-select[_ngcontent-%COMP%]{min-height:3.25rem;cursor:pointer;appearance:auto}.custom-select[_ngcontent-%COMP%]{position:relative;width:100%}.custom-select-trigger[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;min-height:3.25rem;padding:.875rem 1rem;background:color-mix(in srgb,var(--color-text-primary) 8%,transparent);border:1px solid color-mix(in srgb,var(--color-text-primary) 25%,transparent);border-radius:var(--border-radius-md);color:var(--color-text-primary);font-size:1rem;font-weight:500;font-family:inherit;cursor:pointer;transition:border-color .2s,box-shadow .2s;text-align:left}.custom-select.open[_ngcontent-%COMP%]   .custom-select-trigger[_ngcontent-%COMP%]{border-color:var(--color-primary);box-shadow:0 0 0 2px color-mix(in srgb,var(--color-primary) 25%,transparent)}.custom-select-trigger[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.custom-select-chevron[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .2s;color:var(--color-text-secondary)}.custom-select.open[_ngcontent-%COMP%]   .custom-select-chevron[_ngcontent-%COMP%]{transform:rotate(180deg)}.custom-select-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);left:0;right:0;margin:0;padding:.25rem 0;list-style:none;background:color-mix(in srgb,var(--color-primary) 8%,var(--background-dark));border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);border-radius:var(--border-radius-md);box-shadow:0 8px 24px #00000080;max-height:160px;overflow-y:auto;z-index:9999;display:none}.custom-select.open[_ngcontent-%COMP%]   .custom-select-dropdown[_ngcontent-%COMP%]{display:block}.custom-select-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.625rem .75rem;font-size:1rem;color:var(--color-text-primary);cursor:pointer;transition:background .15s}.custom-select-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, .custom-select-dropdown[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background:var(--color-primary-light);color:var(--color-primary)}.state-filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.state-filter-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;background:color-mix(in srgb,var(--color-text-primary) 8%,transparent);border-radius:var(--border-radius-md);border:1px solid color-mix(in srgb,var(--color-text-primary) 25%,transparent);cursor:pointer;transition:border-color .2s,box-shadow .2s}.state-filter-item[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.state-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-primary)}.state-checkbox[_ngcontent-%COMP%]{accent-color:var(--color-primary);cursor:pointer}.w-full[_ngcontent-%COMP%]{width:100%}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:var(--border-radius-md);font-weight:800;font-size:.875rem;text-transform:uppercase;letter-spacing:.03em;cursor:pointer;border:2px solid transparent;transition:background .2s,border-color .2s,color .2s,box-shadow .2s}.btn-primary[_ngcontent-%COMP%]{background:var(--color-primary);color:var(--color-primary-contrast, #0a0f0e);border-color:transparent}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:color-mix(in srgb,var(--color-primary) 90%,white);box-shadow:0 0 20px color-mix(in srgb,var(--color-primary) 40%,transparent)}.btn-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--color-primary);border-color:var(--color-primary)}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-light)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.notifications-area[_ngcontent-%COMP%]{flex:1;min-height:0;display:flex;flex-direction:column;gap:var(--spacing-xl);min-width:0;padding:var(--spacing-xl);overflow-y:auto}.notif-steps[_ngcontent-%COMP%]{display:inline-flex;align-self:flex-start;gap:.5rem;padding:.25rem;background:color-mix(in srgb,var(--color-primary) 6%,var(--background-dark));border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);border-radius:var(--border-radius-md)}.notif-step-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.6rem .9rem;border:1px solid transparent;background:transparent;color:var(--color-text-secondary);border-radius:var(--border-radius-md);font-weight:700;font-size:.875rem;cursor:pointer;transition:background .2s,color .2s}.notif-step-btn.active[_ngcontent-%COMP%]{background:var(--color-primary-light);color:var(--color-primary)}.state-identifier-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.1rem}.user-search-hint[_ngcontent-%COMP%]{margin:.5rem 0 .75rem;font-size:.8125rem;color:var(--color-text-secondary);font-weight:500;line-height:1.4}.admin-send-hint[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:.8125rem;color:var(--color-text-secondary)}.admin-manual-error[_ngcontent-%COMP%]{margin:0 0 .75rem;padding:.75rem 1rem;border-radius:var(--border-radius-md);border:1px solid rgba(239,68,68,.25);background:#ef444414;color:var(--color-logout-hover-text);font-weight:600;font-size:.875rem}.selected-users[_ngcontent-%COMP%]{margin-top:1rem}.selected-users-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.user-chip-selected[_ngcontent-%COMP%], .user-chip-excluded[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.4rem .6rem;border-radius:var(--border-radius-md);border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text-primary);font-size:.875rem;cursor:pointer;transition:all .2s ease}.user-chip-selected[_ngcontent-%COMP%]:hover{background-color:var(--color-background-hover);border-color:var(--color-primary)}.user-chip-excluded[_ngcontent-%COMP%]{border-color:#ef444466;background-color:#ef444414}.user-chip-excluded[_ngcontent-%COMP%]:hover{background-color:#ef44441f;border-color:#ef444499}.excluded-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:1.2rem;height:1.2rem;border-radius:50%;background-color:#ef444433;color:var(--color-logout-hover-text);font-weight:700;font-size:.75rem;line-height:1}.remove-icon[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-weight:600;font-size:1rem;line-height:1}.user-chip-excluded[_ngcontent-%COMP%]   .remove-icon[_ngcontent-%COMP%]{color:#ef4444cc}.admin-manual-panel[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-primary) 6%,var(--background-dark));border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);border-radius:.75rem;padding:1.25rem 1.5rem}.admin-manual-panel-head[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;gap:1rem;margin-bottom:1rem}.admin-manual-title[_ngcontent-%COMP%]{font-size:var(--font-size-h2);font-weight:var(--font-weight-bold);color:var(--color-text-primary);margin:0}.admin-manual-form[_ngcontent-%COMP%]{margin-bottom:1rem}.admin-manual-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1rem}.admin-manual-field[_ngcontent-%COMP%]{min-width:0;flex:1}.admin-manual-field-recipient[_ngcontent-%COMP%]{flex:1.25}.admin-manual-field-type[_ngcontent-%COMP%]{flex:1.5}.admin-manual-field-grow[_ngcontent-%COMP%]{flex:1;min-width:200px}.admin-manual-textarea[_ngcontent-%COMP%]{width:100%;min-height:120px;padding:.75rem;border-radius:var(--border-radius-md);border:1px solid var(--color-border);background-color:var(--color-surface);font-size:.875rem;color:var(--color-text-primary);resize:vertical}.admin-manual-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px var(--color-primary-light)}.admin-manual-hint[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.75rem;color:var(--color-text-secondary)}.admin-manual-result[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem 1.25rem;border-radius:var(--border-radius-md);border:1px solid rgba(16,185,129,.25);background:#10b98114;color:var(--color-text-primary)}.admin-manual-result-queued[_ngcontent-%COMP%]{border-color:#3b82f666;background:#3b82f614}.email-attachments-list[_ngcontent-%COMP%]{list-style:none;margin:.5rem 0 0;padding:0;display:flex;flex-wrap:wrap;gap:.5rem}.email-attachment-item[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;padding:.25rem .5rem;border-radius:var(--border-radius-md);border:1px solid var(--color-border);background-color:var(--color-surface);font-size:.8125rem}.email-attachment-name[_ngcontent-%COMP%]{max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.email-attachment-remove[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;padding:0;border:none;border-radius:4px;background:transparent;color:var(--color-text-secondary);cursor:pointer;transition:background .2s,color .2s}.email-attachment-remove[_ngcontent-%COMP%]:hover{background:#ef444426;color:#ef4444}.email-attachments-dropzone[_ngcontent-%COMP%]{border:2px dashed var(--color-border);border-radius:var(--border-radius-md);background-color:var(--color-surface);transition:border-color .2s,background-color .2s}.email-attachments-dropzone.drag-over[_ngcontent-%COMP%]{border-color:var(--color-primary);background-color:var(--color-primary-light)}.email-attachments-dropzone-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100px;padding:1rem 1.5rem;cursor:pointer;color:var(--color-text-secondary);font-size:.875rem}.email-attachments-dropzone-label[_ngcontent-%COMP%]:hover, .email-attachments-dropzone.drag-over[_ngcontent-%COMP%]   .email-attachments-dropzone-label[_ngcontent-%COMP%]{color:var(--color-primary)}.email-attachments-dropzone-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.email-attachments-dropzone-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem}.admin-manual-result-message[_ngcontent-%COMP%]{margin:0 0 .75rem;font-weight:600;font-size:.875rem;color:var(--color-text-primary)}.admin-manual-result-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:.75rem}.admin-manual-result-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.admin-manual-result-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);font-weight:600}.admin-manual-result-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:800;color:var(--color-text-primary)}@media (max-width: 900px){.admin-manual-result-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.notif-page-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-end;justify-content:space-between;gap:1rem;margin-bottom:1.5rem}.notif-page-header-text[_ngcontent-%COMP%]{flex:1;min-width:0}.notif-page-title[_ngcontent-%COMP%]{font-size:var(--font-size-h2);font-weight:var(--font-weight-bold);color:var(--color-text-primary);margin:0 0 .5rem}.notif-page-subtitle[_ngcontent-%COMP%]{font-size:var(--font-size-body);font-weight:var(--font-weight-medium);color:var(--color-text-secondary);margin:0}.notif-page-subtitle-count[_ngcontent-%COMP%]{color:var(--color-primary)}.notif-page-btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.625rem 1.25rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--border-radius-md);font-weight:600;font-size:.9375rem;cursor:pointer;transition:filter .2s}.notif-page-btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}.notif-page-error[_ngcontent-%COMP%]{color:var(--color-logout-hover-text);padding:var(--spacing-md);background:var(--color-logout-hover-bg);border-radius:var(--border-radius-md);margin-bottom:var(--spacing-lg)}.notif-page-loading[_ngcontent-%COMP%], .notif-page-empty[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;color:var(--color-text-secondary)}.notif-page-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem}.notif-page-empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;opacity:.6}.notif-page-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.notif-card[_ngcontent-%COMP%]{position:relative;--notif-dot-left: .5rem;--notif-dot-top: 1rem;display:flex;align-items:flex-start;gap:1rem;padding:1.25rem 1.25rem 1.25rem 2rem;border-radius:var(--border-radius-lg);border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);background:color-mix(in srgb,var(--color-primary) 6%,var(--background-dark));transition:box-shadow .2s,background .2s;cursor:pointer;box-shadow:0 5px 10px #00ffc31a}.notif-card[_ngcontent-%COMP%]:hover{background:var(--color-background-hover);box-shadow:var(--shadow-neon)}.notif-card-unread[_ngcontent-%COMP%]{background:var(--color-surface);border-color:var(--color-border)}.notif-card-dot[_ngcontent-%COMP%]{position:absolute;left:var(--notif-dot-left);top:var(--notif-dot-top);transform:none;width:8px;height:8px;background:var(--color-primary);border-radius:50%}.notif-card-icon[_ngcontent-%COMP%]{flex-shrink:0;width:3rem;height:3rem;border-radius:var(--border-radius-md);display:flex;align-items:center;justify-content:center;font-size:1.25rem}.notif-icon-green[_ngcontent-%COMP%]{background:#22c55e26;color:#16a34a}.notif-icon-orange[_ngcontent-%COMP%]{background:#f9731626;color:#ea580c}.notif-icon-primary[_ngcontent-%COMP%]{background:var(--color-primary-light);color:var(--color-primary)}.notif-icon-slate[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-text-secondary)}.notif-card-body[_ngcontent-%COMP%]{flex:1;min-width:0}.notif-card-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:.5rem;margin-bottom:.25rem}.notif-card-title[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;color:var(--color-text-primary);margin:0}.notif-card[_ngcontent-%COMP%]:not(.notif-card-unread)   .notif-card-title[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text-secondary)}.notif-card-time[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);white-space:nowrap}.notif-card-message[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5;color:var(--color-text-secondary);margin:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.notif-card-message.expanded[_ngcontent-%COMP%]{display:block;-webkit-line-clamp:unset;-webkit-box-orient:unset;overflow:visible;text-overflow:unset}.notif-card-message-toggle[_ngcontent-%COMP%]{margin-top:.28rem;padding:0;border:none;background:transparent;color:var(--color-primary);font-size:.8rem;font-weight:600;text-decoration:underline;cursor:pointer}.notif-card-message-toggle[_ngcontent-%COMP%]:hover{filter:brightness(1.08)}.notif-card-actions[_ngcontent-%COMP%]{flex-shrink:0;opacity:0;transition:opacity .2s}.notif-card[_ngcontent-%COMP%]:hover   .notif-card-actions[_ngcontent-%COMP%]{opacity:1}.notif-card-action[_ngcontent-%COMP%]{padding:.5rem;background:none;border:none;color:var(--color-text-secondary);cursor:pointer;border-radius:var(--border-radius-sm);transition:color .2s}.notif-card-action[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.notif-card-action-delete[_ngcontent-%COMP%]:hover{color:var(--color-logout-hover-text)}.modern-pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1.5rem;margin-top:var(--spacing-lg)}.pag-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}@media (max-width: 1200px){.management-main[_ngcontent-%COMP%]{flex-direction:column;overflow-y:auto}.management-sidebar[_ngcontent-%COMP%]{width:100%;border-right:none;border-bottom:1px solid var(--color-border)}.notifications-area[_ngcontent-%COMP%]{flex-shrink:0;overflow-y:visible}}@media (max-width: 769px){.management-sidebar[_ngcontent-%COMP%]{padding:var(--spacing-md);gap:var(--spacing-md)}.filter-card[_ngcontent-%COMP%]{padding:.9rem}.notifications-area[_ngcontent-%COMP%]{gap:var(--spacing-md);padding:var(--spacing-md)}.notif-page-header[_ngcontent-%COMP%]{margin-bottom:1rem;align-items:stretch;gap:.75rem}.notif-page-title[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:.35rem}.notif-page-subtitle[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.35;overflow-wrap:anywhere}.notif-page-btn-primary[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:.6rem .85rem;font-size:.9rem}.notif-card[_ngcontent-%COMP%]{gap:.75rem;padding:1rem .9rem 1rem 1.35rem;--notif-dot-left: .42rem;--notif-dot-top: .75rem}.notif-card-icon[_ngcontent-%COMP%]{width:2.55rem;height:2.55rem;font-size:1.06rem}.notif-card-head[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.35rem}}@media (max-width: 480px){.management-sidebar[_ngcontent-%COMP%], .notifications-area[_ngcontent-%COMP%]{padding:.75rem}.notif-page-title[_ngcontent-%COMP%]{font-size:1.45rem}.notif-page-btn-primary[_ngcontent-%COMP%]{padding:.56rem .7rem;font-size:.84rem;border-radius:.6rem}.notif-page-btn-primary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow-wrap:anywhere}.notif-card[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.65rem;padding:.9rem 2.3rem .9rem 1.35rem;--notif-dot-left: .46rem;--notif-dot-top: .65rem}.notif-card-icon[_ngcontent-%COMP%]{width:2.35rem;height:2.35rem;font-size:.95rem}.notif-card-head[_ngcontent-%COMP%]{display:block;margin-bottom:.2rem}.notif-card-time[_ngcontent-%COMP%]{display:block;margin-top:.18rem}.notif-card-actions[_ngcontent-%COMP%]{position:absolute;top:.88rem;right:.55rem;margin-left:0;align-self:auto;opacity:1;z-index:1}.notif-card-action[_ngcontent-%COMP%]{padding:.35rem}}.form-group-editor[_ngcontent-%COMP%]{flex:1;min-width:0;width:100%}.rich-editor-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;min-height:280px}.rich-editor-toolbar-row[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;background:color-mix(in srgb,var(--color-primary) 8%,var(--background-dark));border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);border-bottom:none;border-radius:var(--border-radius-md) var(--border-radius-md) 0 0}.rich-editor-toolbar-row[_ngcontent-%COMP%]   ngx-editor-menu[_ngcontent-%COMP%]{flex:1;min-width:0}.editor-toolbar-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;height:30px;padding:0 8px;margin:3px 4px;border:none;border-radius:4px;background:transparent;color:var(--color-text-primary);font-size:.8rem;cursor:pointer;transition:background .2s,color .2s;flex-shrink:0}.editor-toolbar-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-light);color:var(--color-primary)}.editor-reset-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;padding:0;margin:3px 4px;border:none;border-radius:4px;background:transparent;color:var(--color-text-primary);cursor:pointer;transition:background .2s,color .2s;flex-shrink:0}.editor-reset-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-light);color:var(--color-primary)}.rich-editor-wrapper[_ngcontent-%COMP%]     .NgxEditor, .rich-editor-wrapper[_ngcontent-%COMP%]     .NgxEditor__Wrapper, .rich-editor-wrapper[_ngcontent-%COMP%]     ngx-editor-menu{--ngx-editor-background-color: #1c2422;--ngx-editor-text-color: var(--color-text-primary);--ngx-editor-placeholder-color: var(--color-text-secondary);--ngx-editor-border-color: rgba(0, 255, 204, .25);--ngx-editor-wrapper-border-color: rgba(0, 255, 204, .25);--ngx-editor-menubar-bg-color: #1c2422;--ngx-editor-popup-bg-color: #1c2422;--ngx-editor-menu-item-hover-bg-color: var(--color-primary-light);--ngx-editor-menu-item-active-color: var(--color-primary);--ngx-editor-menu-item-active-bg-color: var(--color-primary-light)}.rich-editor-wrapper[_ngcontent-%COMP%]     .NgxEditor{border-radius:0 0 var(--border-radius-md) var(--border-radius-md);border:1px solid rgba(0,255,204,.25);background-color:#1c2422!important}.rich-editor-wrapper[_ngcontent-%COMP%]     .NgxEditor__Content{min-height:220px;padding:12px 16px!important}.email-excluded-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.email-excluded-modal[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-primary) 6%,var(--background-dark));border:1px solid color-mix(in srgb,var(--color-primary) 12%,transparent);border-radius:.75rem;padding:1.5rem 2rem;max-width:420px;width:100%;max-height:85vh;overflow:auto}.email-excluded-modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-text-primary);margin:0 0 .5rem}.email-excluded-modal-hint[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);margin:0 0 1rem;line-height:1.4}.email-excluded-modal-list[_ngcontent-%COMP%]{list-style:none;margin:0 0 1.25rem;padding:0;display:flex;flex-direction:column;gap:.5rem;max-height:240px;overflow-y:auto}.email-excluded-modal-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.15rem;padding:.5rem .75rem;border-radius:var(--border-radius-md);background:color-mix(in srgb,var(--color-text-primary) 8%,transparent);border:1px solid color-mix(in srgb,var(--color-text-primary) 25%,transparent)}.email-excluded-modal-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text-primary)}.email-excluded-modal-email[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--color-text-secondary)}.email-excluded-modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})};export{Oe as DashboardNotificacionesComponent};
