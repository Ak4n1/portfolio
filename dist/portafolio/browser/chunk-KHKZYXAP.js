import{a as g}from"./chunk-MQB6D6E4.js";import{a as l,b as p,d as m}from"./chunk-SFS47BZX.js";import{D as a,U as u,_ as c,a as o,b as s,l as d,p as r}from"./chunk-PWGBBCAH.js";var h=g.apiBaseUrl,i=`${h}/api/notifications`,f=class n{http=c(m);unreadCountChanged$=new d;getUnreadCountChanged(){return this.unreadCountChanged$.asObservable()}notifyUnreadCountChanged(){this.unreadCountChanged$.next()}getHttpOptions(){return{headers:new l({"Content-Type":"application/json"})}}getNotifications(e={}){let t=new p;return e.page!=null&&(t=t.set("page",e.page)),e.size!=null&&(t=t.set("size",e.size)),e.type&&(t=t.set("type",e.type)),e.read!=null&&(t=t.set("read",e.read)),e.dateFrom&&(t=t.set("dateFrom",e.dateFrom)),e.dateTo&&(t=t.set("dateTo",e.dateTo)),e.search&&(t=t.set("search",e.search)),this.http.get(i,s(o({},this.getHttpOptions()),{params:t})).pipe(a(()=>r({notifications:[],totalElements:0,totalPages:0,page:0,size:e.size??10,unreadCount:0})))}getUnreadCount(e){let t=new p;return e?.excludeType&&(t=t.set("excludeType",e.excludeType)),this.http.get(`${i}/unread-count`,s(o({},this.getHttpOptions()),{params:t})).pipe(a(()=>r(0)))}markAsRead(e){return this.http.post(`${i}/${e}/read`,{},this.getHttpOptions())}markAllAsRead(){return this.http.post(`${i}/read-all`,{},this.getHttpOptions())}deleteNotification(e){return this.http.delete(`${i}/${e}`,this.getHttpOptions())}static \u0275fac=function(t){return new(t||n)};static \u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})};export{f as a};
