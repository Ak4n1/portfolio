import{a as E}from"./chunk-RN22FLO7.js";import{c as F,d as C,e as k,f as I,k as V,m as T,n as N,u as R,w as z}from"./chunk-SBYHMJI5.js";import{f as w,g as O}from"./chunk-3STYZOIF.js";import"./chunk-DW4U6NCB.js";import"./chunk-WY3MPDUA.js";import{k as M,s as S}from"./chunk-RKUWSNO2.js";import{Ab as P,Eb as b,Ib as _,Jb as s,Rb as r,Sb as v,Tb as y,Ua as a,_ as c,cb as x,fa as p,ga as f,hb as m,pb as l,rb as h,tb as d,yb as n,zb as o}from"./chunk-VJKI3SXJ.js";function D(e,i){if(e&1&&(n(0,"p",3),r(1,"Se ha enviado un email a "),n(2,"strong"),r(3),o()(),n(4,"p",4),r(5,"Revisa tu bandeja de entrada y spam. El enlace expira en 15 minutos."),o(),n(6,"a",5),r(7,"Volver a Iniciar Sesi\xF3n"),o()),e&2){let t=s();a(3),v(t.submittedEmail)}}function j(e,i){if(e&1){let t=b();n(0,"button",17),_("click",function(){p(t);let g=s(3);return f(g.goToResendVerification())}),r(1," Reenviar Email de Verificaci\xF3n "),o()}}function L(e,i){if(e&1&&(n(0,"p",15),r(1),o(),m(2,j,2,0,"button",16)),e&2){let t=s(2);a(),v(t.errorMessage),a(),d(t.errorMessage.includes("verificado")?2:-1)}}function q(e,i){e&1&&(n(0,"span",18),r(1,"Email v\xE1lido requerido"),o())}function A(e,i){if(e&1){let t=b();n(0,"p",6),r(1,"Ingresa tu email y te enviaremos las instrucciones para restablecer tu contrase\xF1a."),o(),m(2,L,3,2),n(3,"form",7),_("ngSubmit",function(){p(t);let g=s();return f(g.onSubmit())}),n(4,"div",8)(5,"label",9),r(6,"Email"),o(),P(7,"input",10),m(8,q,2,0,"span",11),o(),n(9,"div",12)(10,"a",13),r(11,"Cancelar"),o(),n(12,"button",14),r(13),o()()()}if(e&2){let t=s();a(2),d(t.errorMessage?2:-1),a(),l("formGroup",t.form),a(4),h("error",t.isFieldInvalid("email")),a(),l("ngIf",t.isFieldInvalid("email")),a(4),l("disabled",t.form.invalid||t.isSubmitting),a(),y(" ",t.isSubmitting?"Enviando...":"Enviar Instrucciones"," ")}}var G=class e{fb=c(R);router=c(w);authService=c(E);form;isSubmitting=!1;success=!1;errorMessage="";submittedEmail="";constructor(){this.form=this.fb.group({email:["",[C.required,C.email]]})}isFieldInvalid(i){let t=this.form.get(i);return!!t&&t.invalid&&(t.dirty||t.touched)}onSubmit(){if(this.form.invalid||this.isSubmitting)return;this.isSubmitting=!0,this.success=!1,this.errorMessage="";let i=this.form.get("email")?.value;this.authService.forgotPassword(i).subscribe({next:()=>{this.isSubmitting=!1,this.success=!0,this.submittedEmail=i},error:t=>{this.isSubmitting=!1,this.errorMessage=t.error?.message||"Error al solicitar. Intenta m\xE1s tarde."}})}goToLogin(){this.router.navigate(["/login"])}goToResendVerification(){let i=this.form.get("email")?.value;this.router.navigate(["/verify-email-pending"],{queryParams:{email:i}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=x({type:e,selectors:[["app-forgot-password"]],decls:6,vars:1,consts:[[1,"auth-page"],[1,"auth-container"],[1,"auth-title"],[1,"auth-success"],[1,"auth-hint"],["routerLink","/login",1,"btn-submit"],[1,"auth-message"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","placeholder","tu@email.com"],["class","error-msg",4,"ngIf"],[1,"auth-actions"],["routerLink","/login",1,"btn-cancel"],["type","submit",1,"btn-submit",3,"disabled"],[1,"auth-error"],["type","button",1,"btn-secondary"],["type","button",1,"btn-secondary",3,"click"],[1,"error-msg"]],template:function(t,u){t&1&&(n(0,"section",0)(1,"div",1)(2,"h2",2),r(3,"Recuperar Contrase\xF1a"),o(),m(4,D,8,1)(5,A,14,7),o()()),t&2&&(a(4),d(u.success?4:5))},dependencies:[S,M,z,V,F,k,I,T,N,O],styles:[".auth-page[_ngcontent-%COMP%]{min-height:80vh;display:flex;align-items:center;justify-content:center;padding:2rem}.auth-container[_ngcontent-%COMP%]{width:100%;max-width:420px;background:var(--background-card);border:1px solid var(--border-color);border-radius:12px;padding:2rem}.auth-title[_ngcontent-%COMP%]{color:var(--title-primary);font-size:1.5rem;margin-bottom:1rem;text-align:center}.auth-message[_ngcontent-%COMP%], .auth-success[_ngcontent-%COMP%], .auth-hint[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--text-primary)}.auth-success[_ngcontent-%COMP%]{color:var(--primary-color)}.auth-hint[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.auth-error[_ngcontent-%COMP%]{color:var(--error, #e74c3c);font-size:.9rem;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-primary);font-size:.9rem;font-weight:500;margin-bottom:.35rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.65rem .75rem;background:var(--background-card);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:.95rem}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:var(--error, #e74c3c)}.error-msg[_ngcontent-%COMP%]{color:var(--error, #e74c3c);font-size:.8rem;margin-top:.25rem;display:block}.auth-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.25rem}.btn-cancel[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{flex:1;padding:.6rem 1rem;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;text-align:center;text-decoration:none;display:inline-flex;align-items:center;justify-content:center}.btn-cancel[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--text-secondary);border:1px solid var(--border-color)}.btn-submit[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--background-dark);border:none}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){filter:brightness(1.1)}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})};export{G as ForgotPasswordComponent};
